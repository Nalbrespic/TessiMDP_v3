{# app/Resources/views/layout.html.twig #}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>{% block title %}Tessi MD - Portail{% endblock %}</title>

    {% block stylesheets %}

        {#<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">#}
        {#<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">#}
        <link rel="stylesheet" href="{{ asset('jquery-ui-1.12.1/jquery-ui.theme.min.css') }}">
        <link rel="stylesheet" href="{{ asset('bootstrap-3.3.7/css/bootstrap.min.css') }}">
        <link rel="stylesheet" href="{{ asset('datepicker.css') }}">
        <link rel="stylesheet" href="{{ asset('css/fullcalendar.css') }}">
        <link rel="stylesheet" href="{{ asset('Multi-level-Vertical-Accordion/src/lazeemenu.css') }}">
        <link rel="stylesheet" href="{{ asset('style.css') }}">
        <link rel="stylesheet" href="{{ asset('rangeDatePicker/jquery-date-range-picker-master/dist/daterangepicker.css') }}">

    {% endblock %}
</head>


<div class="container-fluid" style="position: relative; width: 99%;">
    <div class="row">
        <div id="header" class="jumbotron" style="margin-top: 9px;background-color: #f4f2f7;height: 103px;margin-left: 14px;margin-right: 14px;">
            <a href="{{ path('tmd_core_homepage') }}"><img id="imgHeader" src="{{ asset('Images/logo.png') }}" style="float: left;"></a>
            <h1 id="texteHeadertessi" style="color: #514958"><span style="font-family: Colaborate">tessi</span> <span style="font-family: ColaborateThin; font-size: 0.6em;"> customer marketing </span></h1>

            {#<div style="text-align: right;margin-top: -22px;">{% if app.user.username is defined %}#}
                                {#Bonjour {{ app.user.username }}#}
                                {#<a href="{{ path('logout') }}" >Deconnexion</a></div>#}
                             {#{% else %}#}
                                {#<a href="{{ path('login') }}" >Connexion</a></div>#}
                             {#{% endif %}#}
        </div>
    </div>

    <nav id="hideHeaderNavConnec" class="navbar navbar-default" style="position: absolute;width: 99%;top: 0;/*! margin-right: 34px; */padding-right: 64px;background-color: transparent;border: inherit;margin-top: 92px;">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->

            <!-- Collect the nav links, forms, and other content for toggling -->


                <ul class="nav navbar-nav navbar-right">
                    {% if app.user.username is defined %}
                        <li>Bonjour <span style="font-size: 1.1em;"> {{ app.user.username }}</span></li>
                        <li><a href="{{ path('logout') }}" style="padding: inherit;padding-left:12px;font-size: 0.9em;margin-top: 2px;">Deconnexion</a></li>
                    {% else %}
                        <li><a href="{{ path('login') }}" style="padding: inherit;padding-left:12px;font-size: 0.9em;margin-top: 2px;">Connexion</a></li>
                    {% endif %}
                    {% if is_granted('ROLE_PROD') %}
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="padding: inherit;padding-left:12px;margin-top: 2px;font-size: 0.9em;">Configuration <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="{{ path('tmd_config_addnews') }}">Ajout de News</a></li>
                                {% if is_granted('ROLE_SUPER_ADMIN') %}<li><a href="{{ path('tmd_config_homepage') }}">Gestion utilisateurs</a></li>{% endif %}
                                {#<li role="separator" class="divider"></li>#}
                                {#<li><a href="#">Separated link</a></li>#}
                            </ul>
                        </li>
                    {% endif %}
                </ul>
            </div><!-- /.navbar-collapse -->

    </nav>





</div>
<div class="container-fluid">
    <div class="row">
        <div id="menuGauche" class="col-md-2" {% block styleChild %}{% endblock %}>


            {% if is_granted('ROLE_ATC') or is_granted('ROLE_PROD') %}
                <p class="ongletMenu">Suivi de production</p>
                <nav>
                    <ul class="nav menu shadow" style="background-color: #504a62;border-radius: 5px;margin-top: -26px;padding-top: 4px;padding-bottom: 4px;margin-right: 27px;">
                        <li><a onmouseover="this.style.color = 'palevioletred'" onmouseout="this.style.color = 'white'" href="{{ path('tmd_prod_client') }}">Suivi opération</a></li>
                        <li><a onmouseover="this.style.color = 'palevioletred'" onmouseout="this.style.color = 'white'" href="{{  path('tmd_prod_suiviCourant') }}">Opérations en cours</a></li>

                    </ul>
                </nav>
            {% endif %}

            {% if is_granted('ROLE_PROD_USER') %}
                <p class="ongletMenu">App de production</p>
                <nav>
                    <ul class="nav menu shadow" style="background-color: #504a62;border-radius: 5px;margin-top: -26px;padding-top: 4px;padding-bottom: 4px;margin-right: 27px;">
                        <li ><a onclick="hideMenu()" onmouseover="this.style.color = 'palevioletred'" onmouseout="this.style.color = 'white'" href="{{ path('tmd_appli_production') }}">Etiquettes ZPL</a></li>
                        <li ><a onmouseover="this.style.color = 'palevioletred'" onmouseout="this.style.color = 'white'" href="{{ path('tmd_appli_cartepage') }}">Saisi cartes</a></li>

                        </ul>
                </nav>
            {% endif %}


            {% if is_granted('ROLE_PROD_USER') %}
                <p class="ongletMenu">Production</p>
                <nav>
                    <ul class="nav menu shadow" style="background-color: #504a62;border-radius: 5px;margin-top: -26px;padding-top: 4px;padding-bottom: 4px;margin-right: 27px;">
                        <li ><a href="{{ path('tmd_coriolis_homepage') }}">Coriolis</a></li>
                    </ul>
                </nav>
            {% endif %}


            {% if is_granted('ROLE_ATC') or is_granted('ROLE_PROD') %}
                <nav style="margin-right: 14px;margin-top: -22px;">
                            <ul id="menu-1" >
                                <li style="margin-right: 15px;">
                                    <h3 class="ongletMenu " style="margin-bottom: 20px;"><a class="arrow-btn" href="#" style="float: none;margin-left: -5px;color: white;font-family: ColaborateReg;font-size: 1.1em;width: 166px;outline-style: none;">Gestions</a></h3>
                                    <ul class="lz-menu nav menu " id="zindexmenu-1" style="background-color: #504a62;border-radius: 5px;margin-top: -26px;padding-top: 4px;padding-bottom: 12px;margin-left: 4px;box-shadow: 4px 2px 7px #504A62;margin-bottom: 7px;z-index: -10;">
                                        <li ><a style="padding-top: 13px;" href="http://tmdsws801/portail/interface_enregistrement/index.php" target="_blank">Suivi de production</a></li>
                                        <li><a href="http://tmdsws801/portail/fiche_de_suivi/modif.php" target="_blank" >Gérer ATC/fichiers</a></li>
                                        <li ><a href="http://tmdsws801/portail/completer_enregistrement/index.php" target="_blank">Saisie production</a></li>
                                        <li ><a href="http://tmdsws801/portail/contenants/contenants_index.php" target="_blank">Cartons</a></li>
                                        <li ><a href="http://tmdsws801/portail/doublons/doublons_index.php" target="_blank">Doublons</a></li>
                                        <li ><a href="http://tmdsws801/portail/clients/index_clients.php" target="_blank">Clients</a></li>
                                        <li ><a href="http://tmdsws801/portail/chemins_fixes/index_chemins_fixes.php" target="_blank">Chemins fixes</a></li>
                                        <li ><a href="http://tmdsws801/portail/sfrLtrChq/sfrLtrChq.php" target="_blank">Lettres Cheque SFR</a></li>
                                        <li ><a href="http://tmdsws801/portail/fransat/index_fransat.php" target="_blank">Fransat</a></li>
                                        <span id="spanmenu-1"><li style="color: white;font-size: 0.6em;margin-left: 9px;font-family: initial;">Suivi de production</li>
                                                <li style="color: white;font-size: 0.6em;margin-left: 9px;font-family: initial;">Gérer ATC/fichiers</li>
                                             <li style="color: white;font-size: 0.6em;margin-left: 9px;font-family: initial;">Saisie production</li>
                                        </span>
                                    </ul>
                                </li>
                            </ul>
                </nav>
            {% endif %}

            {% if is_granted('ROLE_ATC') or is_granted('ROLE_PROD') %}
                <nav style="margin-right: 14px;margin-top: -22px;">
                    <ul id="menu-2" >
                        <li style="margin-right: 15px;">
                            <h3 class="ongletMenu " style="margin-bottom: 20px;"><a class="arrow-btn" href="#" style="float: none;margin-left: -5px;color: white;font-family: ColaborateReg;font-size: 1.1em;width: 166px;outline-style: none;">Suivi de Plis </a></h3>
                            <ul class="lz-menu nav menu " id="zindexmenu-1" style="background-color: #504a62;border-radius: 5px;margin-top: -26px;padding-top: 4px;padding-bottom: 12px;margin-left: 4px;box-shadow: 4px 2px 7px #504A62;margin-bottom: 7px;z-index: -10;">
                                <li ><a style="padding-top: 13px;" href="http://tmdsws801/portail/suivi_PND/index_PND.php" target="_blank">Saisir des Plis - PND</a></li>
                                <li><a href="http://tmdsws801/portail/suivi_PND/index_Gerer_PND.php" target="_blank" >Gérer les Plis - PND</a></li>
                                <li ><a href="http://tmdsws801/portail/suivi_PND/synthSaisiePND.php" target="_blank">Synthese PND</a></li>
                                <li ><a href="http://tmdsws801/portail/suivi_MSP/index_MSP.php" target="_blank">Saisir des Codes Barre</a></li>
                                <li ><a href="http://tmdsws801/portail/EXAPAQ/index_EXAPAQ.php" target="_blank">EXAPAQ</a></li>
                                <li ><a href="http://tmdsws801/portail/colisprive/index_colisprive.php" target="_blank">Colis Privé</a></li>
                                <li ><a href="http://tmdsws801/portail/colissimo/index_colissimo.php" target="_blank">Colissimo</a></li>
                                <span id="spanmenu-1"><li style="color: white;font-size: 0.6em;margin-left: 9px;font-family: initial;">Saisir des Plis - PND</li>
                                                <li style="color: white;font-size: 0.6em;margin-left: 9px;font-family: initial;">Gérer les Plis - PND</li>
                                             <li style="color: white;font-size: 0.6em;margin-left: 9px;font-family: initial;">Synthese PND</li>
                                        </span>
                            </ul>
                        </li>
                    </ul>
                </nav>
            {% endif %}

            {% if is_granted('ROLE_ADMIN') %}
                <nav style="margin-right: 14px;margin-top: -22px;">
                    <ul id="menu-3" >
                        <li style="margin-right: 15px;">
                            <h3 class="ongletMenu " style="margin-bottom: 20px;"><a class="arrow-btn" href="#" style="float: none;margin-left: -5px;color: white;font-family: ColaborateReg;font-size: 1.1em;width: 166px;outline-style: none;">Suivi développement </a></h3>
                            <ul class="lz-menu nav menu " id="zindexmenu-1" style="background-color: #504a62;border-radius: 5px;margin-top: -26px;padding-top: 4px;padding-bottom: 12px;margin-left: 4px;box-shadow: 4px 2px 7px #504A62;margin-bottom: 7px;z-index: -10;">
                                <li ><a style="padding-top: 13px;" href="http://tmdsws801/portail/suivi_developpement/index_suivi_developpement.php" target="_blank">Saisie développement</a></li>
                                <li><a href="http://tmdsws801/portail/suivi_developpement/index_afficher_developpement.php" target="_blank" >Afficher développement</a></li>
                                <li ><a href="http://tmdsws801/portail/developpeurs/index_developpeurs.php" target="_blank">Développeurs</a></li>
                                <li ><a href="http://tmdsws801/portail/saisieDEV/suiviDev.php" target="_blank">Suivi des DEVs</a></li>
                                <li ><a href="{{ path('tmd_zpl_homepage') }}">Etik</a></li>
                                <li ><a href="{{ path('tmd_prod_addApplication') }}">Creation App</a></li>
                                <span id="spanmenu-1"><li style="color: white;font-size: 0.6em;margin-left: 9px;font-family: initial;">Saisir des Plis - PND</li>
                                                <li style="color: white;font-size: 0.6em;margin-left: 9px;font-family: initial;">Développeurs</li>
                                             <li style="color: white;font-size: 0.6em;margin-left: 9px;font-family: initial;">Suivi des DEVs</li>
                                        </span>
                            </ul>
                        </li>
                    </ul>
                </nav>
            {% endif %}



            {% if is_granted('ROLE_ATC') or is_granted('ROLE_PROD') %}
                <nav style="margin-right: 14px;margin-top: -22px;">
                    <ul id="menu-4" >
                        <li style="margin-right: 15px;">
                            <h3 class="ongletMenu " style="margin-bottom: 20px;"><a class="arrow-btn" href="#" style="float: none;margin-left: -5px;color: white;font-family: ColaborateReg;font-size: 1.1em;width: 166px;outline-style: none;">SG </a></h3>
                            <ul class="lz-menu nav menu " id="zindexmenu-1" style="background-color: #504a62;border-radius: 5px;margin-top: -26px;padding-top: 4px;padding-bottom: 12px;margin-left: 4px;box-shadow: 4px 2px 7px #504A62;margin-bottom: 7px;z-index: -10;">
                                <li ><a style="padding-top: 13px;" href="http://tmdsws801/portail/SG/indicateurs.php" target="_blank">Indicateurs Mensuels</a></li>
                                <li><a href="http://tmdsws801/portail/SG/rapportPROD.php" target="_blank" >Rapport Journalier</a></li>
                                <li ><a href="http://tmdsws801/portail/SG/synthPRODzpl2.php" target="_blank">Suivi des Ventes</a></li>
                                <li ><a href="http://tmdsws801/portail/SG/interfaces/suiviPROD/syntheseProdJournaliere.php" target="_blank">Suivi PROD journalier</a></li>
                                <li ><a href="http://tmdsws801/portail/colissimos/saisiEcom.php" target="_blank">Saisie Manuelle Colis</a></li>
                                <li ><a href="http://tmdsws801/portail/colissimos/gestionSaisies.php" target="_blank">Gestion des saisies</a></li>
                                <li ><a href="http://tmdsws801/portail/SG/importZPL.php" target="_blank">Impression Etiq ZPL</a></li>
                                <li ><a href="http://tmdsws801/portail/SG/cloneEtiquette.php" target="_blank">Clonage Etiquettes</a></li>
                                <li ><a href="http://tmdsws801/portail/colissimos/suiviDossiers.php" target="_blank">Suivi de PROD</a></li>
                                <span id="spanmenu-1"><li style="color: white;font-size: 0.6em;margin-left: 9px;font-family: initial;">Saisir des Plis - PND</li>
                                                <li style="color: white;font-size: 0.6em;margin-left: 9px;font-family: initial;">Rapport Journalier</li>
                                             <li style="color: white;font-size: 0.6em;margin-left: 9px;font-family: initial;">Suivi des Ventes</li>
                                        </span>
                            </ul>
                        </li>
                    </ul>
                </nav>
            {% endif %}



            <div id="flecheMenuG" style="position: absolute;right: 0;top: 50%;margin-right: 12px;display: none;cursor: pointer;"><img style="height: 14px;" onclick="hideLeMenu()" src="{{ asset('Images/flecheGauche.png') }}"></div>
        </div>
        {#<div id="flecheMenuG" style="position: absolute;left: 0;top: 50%;margin-left: 20px;display: none;cursor: pointer;"><img onclick="afficheMenu()" src="{{ asset('Images/flecheGauche.png') }}"></div>#}
        <div id="flecheMenuD" onclick="afficheMenu()" style="position: absolute;left: 0;top: 50%;margin-left: 5px;display: none;cursor: pointer;"><span style="position: relative;"><img style="height: 14px;margin-left: 12px;"  src="{{ asset('Images/flecheDroite.png') }}"><p style="position: absolute;-moz-transform: rotate(-90deg);transform: rotate(-90deg);-ms-transform: rotate(-90deg);-webkit-transform: rotate(-90deg);margin-left: -12px;top: 50%;margin-top: -7px;">menu</p></span></div>
            <div id="contentMenu" class="col-md-10" style="background-color: white;min-height: 600px;margin-top: 8px;padding-right: 30px;">
                {#<div class="container-fluid">#}
                {% block body %}
                {% endblock %}
                {#</div>#}
            </div>

    </div>



    <footer>
        <p>Tessi MD © {{ 'now'|date('Y') }}</p>
    </footer>
</div>




{% block javascripts %}
    {# Ajoutez ces lignes JavaScript si vous comptez vous servir des fonctionnalités du bootstrap Twitter #}
    <script src="{{ asset('js/calendar/moment.min.js') }}"></script>
    {#<script src="https://code.jquery.com/jquery-1.12.2.min.js"></script>#}
    <script src="{{ asset('jquery-1.12.2/jquery1.12.2-min.js') }}"></script>
    {#<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>#}
    <script src="{{ asset('bootstrap-3.3.7/js/bootstrap.min.js') }}"></script>
    {#<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>#}
    <script src="{{ asset('jquery-ui-1.12.1/jquery-ui.min.js') }}"></script>
    <script src="{{ asset('js/BrowserPrint/BrowserPrint-1.0.4.min.js') }}"></script>
    {#<script src="{{ asset('js/BrowserPrint/DevDemo.js') }}"></script>#}
    <script src="{{ asset('js/bootstrap-datepicker.js') }}"></script>
    <script src="{{ asset('js/calendar/fullcalendar.js') }}"></script>
    <script src="{{ asset('js/calendar/fr.js') }}"></script>
    <script src="{{ asset('Multi-level-Vertical-Accordion/src/lazeemenu-jquery.js') }}"></script>
    <script src="{{ asset('rangeDatePicker/jquery-date-range-picker-master/src/jquery.daterangepicker.js') }}"></script>
    <script src="{{ asset('js/bootstrap-datepicker.fr.js') }}"></script>

    {% block javascriptsPlus %}
    {% endblock %}

    {#<script>#}
        {#function hideMenu(){#}
            {#document.getElementById('menuGauche').style.display = 'none';#}
        {#}#}

    {#</script>#}


    <script>

        $(document).ready(function() {
            $('#menu-1').lazeemenu('menu-1');
            $('#menu-2').lazeemenu('menu-1');
            $('#menu-3').lazeemenu('menu-1');
            $('#menu-4').lazeemenu('menu-1');
        });

//$('#menu-demo').lazeemenu('expandAll');
//$('#menu-demo').lazeemenu('collapseAll');
    </script>

    {#<script>#}
        {#function tabSynthese(date,app,indice ) {#}
            {#$.ajax({#}
                {#url: "{{ path('tmd_prod_donneSyntheseByDateProd') }}",#}
                {#type: "POST",#}
                {#data: {infoDate: date, infoAppli: app},#}

                {#dataType: "html",#}
                {#contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",#}
                {#complete: function (data) {#}

                    {#var json = data.responseText;#}
                    {#var obj = JSON.parse(json);#}
                    {#var obj2 = obj[1];#}
                    {#var obj3 = obj[2];#}
                    {#var len = obj2.length;#}

                    {#var html2 = "";#}
                    {#if ( indice == 0){#}
                        {#html2 += '<p style="text-align: left;font-size: 1.6em;margin: 10px;">Synthèse pour le mois de '+moment(date).format('MMMM')+'</p><hr class="menutr">';#}
{#//                        html2 = '<p>Synthese pour le mois de '+moment(date).format('MMMM')+'</p>';#}
                    {#}#}
                    {#else{#}
                        {#html2 += '<p style="text-align: left;font-size: 1.6em;margin: 10px;">Synthèse pour la date: '+moment(date).format('DD-MM-YYYY')+'</p><hr class="menutr">';#}
                    {#}#}

                    {#html2 += '<div class="row">'#}
                                         {#+'<div class="col-md-8" >'#}
                                                        {#+'<ul class="nav nav-tabs" role="tablist">'#}
                                                            {#+'<li role="presentation" class="active"><a href="#detailsS" aria-controls="home" role="tab" data-toggle="tab">Synthese</a></li>'#}
                                                            {#+'<li role="presentation"><a href="#transportS" aria-controls="profile" role="tab" data-toggle="tab">Transport</a></li>'#}
                                                            {#+'<li role="presentation"><a href="#testS" aria-controls="home" role="tab" data-toggle="tab">SiteProd</a></li>'#}
                                                            {#+'<li role="presentation"><a href="#articleS" aria-controls="home" role="tab" data-toggle="tab">Articles</a></li>'#}
                                                        {#+'</ul>'#}
                                                        {#+'<div class="tab-content">'#}
                                                            {#+'<div role="tabpanel" class="tab-pane active" id="detailsS" style="background-color: white;border: 1px solid #504a62;border-radius: 3px;padding: 5px;">'#}
                                                                {#+'<div class="row">'#}
                                                                    {#+'<div class="col-md-12">'#}
{#//                                                                        +'<div class="row">'#}
{#//                                                                            +'<div class="col-md-9" style="margin-bottom: -8px;"><p >Nombre de fichiers:    </p></div>'#}
{#//                                                                            +'<div class="col-md-3"><p style="font-size: 1.2em;margin-bottom: -8px;">    </p></div>'#}
{#//                                                                        +'</div>'#}
{#//                                                                        +'<div class="row">'#}
{#//                                                                            +'<div class="col-md-9" style="margin-bottom: -8px;"><p >Total des commandes:     </p></div>'#}
{#//                                                                            +'<div class="col-md-3"><p style="font-size: 1.2em;margin-bottom: -8px;"></p></div>'#}
{#//                                                                        +'</div>'#}
                                                                        {#+'<div class="row">'#}
                                                                            {#+'<div class="col-md-9" style="margin-bottom: -8px;"><p >Nombre de BL produits:     </p></div>'#}
                                                                            {#+'<div class="col-md-3"><p style="font-size: 1.2em;margin-bottom: -8px;">'+obj[0]+'</p></div>'#}
                                                                        {#+'</div>'#}
                                                                        {#+'<div class="row">'#}
                                                                            {#+'<div class="col-md-9" style="margin-bottom: -8px;"><p >Nombre de BL en réclamation:     </p></div>'#}
                                                                            {#+'<div class="col-md-3"><p style="font-size: 1.2em;margin-bottom: -8px;"></p></div>'#}
                                                                        {#+'</div>'#}
{#//                                                                    +'</div>'#}
{#//                                                                    +'<div class="col-md-7">'#}
{#//                                                                        +'<div class="row">'#}
{#//                                                                            +'<div class="col-md-7" style="margin-bottom: -8px;"><p >Attente PROD:    </p></div>'#}
{#//                                                                            +'<div class="col-md-5"><p style="font-size: 1.2em;margin-bottom: -8px;width: 40px;></p></div>'#}
{#//                                                                        +'</div>'#}
{#//                                                                        +'<div class="row">'#}
{#//                                                                            +'<div class="col-md-7" style="margin-bottom: -8px;"><p >Date premiere production:    </p></div>'#}
{#//                                                                            +'<div class="col-md-5"><p style="font-size: 1.2em;margin-bottom: -8px;"></p></div>'#}
{#//                                                                        +'</div>'#}
{#//                                                                        +'<span id="dateMaxProd" style="display: none;"></span>'#}
{#//                                                                        +'<div class="row">'#}
{#//                                                                            +'<div class="col-md-7" style="margin-bottom: -8px;"><p >Date dernière production:</p></div>'#}
{#//                                                                            +'<div class="col-md-5"><p style="font-size: 1.2em;margin-bottom: -8px;"></p></div>'#}
{#//                                                                        +'</div>'#}
{#//                                                                    +'</div>'#}
                                                                {#+'</div>'#}
                                                            {#+'</div>'#}
                                                            {#+'</div>'#}
                                                            {#+'<div role="tabpanel" class="tab-pane" id="transportS" style="background-color: white;border: 1px solid #504a62;border-radius: 3px;padding: 5px;">'#}
                                                                {#+'<div class="row" >'#}
                                                                    {#+'<div class="col-md-12" style="padding-right: 27px;">'#}
                                                                        {#+'<div class="row" style="overflow-y: auto;max-height: 98px;overflow-x: hidden;">'#}
                                                                            {#+'<div class="col-md-11">'#}
                                                                                {#+'<div class="row">'#}
                                                                                {#for (var key in obj3) {#}
                                                                                    {#html2 += '<div class="col-md-8" style="margin-bottom: -8px;">'#}
                                                                                        {#+'<p>'+key+'</p>'#}
                                                                                        {#+'</div>'#}
                                                                                        {#+'<div class="col-md-4" style="margin-bottom: -8px;">'#}
                                                                                        {#+'<p style="font-size: 1.2em;">'+obj3[key]+'</p>'#}
                                                                                        {#+'</div>';#}
                                                                                {#}#}
                                                                                {#html2 +='</div>'#}
                                                                            {#+'</div>'#}
                                                                        {#+'</div>'#}
                                                                    {#+'</div>'#}
                                                                {#+'</div>'#}
                                                            {#+'</div>'#}
                                                            {#+'<div role="tabpanel" class="tab-pane" id="testS" style="background-color: white;border: 1px solid #504a62;border-radius: 3px;padding: 5px;">'#}
                                                                {#+'<div class="row">'#}
                                                                {#+'</div>'#}
                                                            {#+'</div>'#}
                                                            {#+'<div role="tabpanel" class="tab-pane" id="articleS" style="background-color: white;border: 1px solid #504a62;border-radius: 3px;padding: 5px;">'#}
                                                                {#+'<div class="row" >'#}
                                                                    {#+'<div class="col-md-12" style="padding-right: 27px;">'#}
{#//                                                                        +'<div class="row" >'#}
{#//                                                                            +'<div class="col-md-12">'#}
{#//                                                                                +'<div class="row">'#}
{#//                                                                                    +'<div class="col-md-5">'#}
{#//                                                                                        +'<p></p>'#}
{#//                                                                                    +'</div>'#}
{#//                                                                                    +'<div class="col-md-3">'#}
{#//                                                                                        +'<p>Quantité totale</p>'#}
{#//                                                                                    +'</div>'#}
{#//                                                                                    +'<div class="col-md-3">'#}
{#//                                                                                        +'<p>Reste à produire</p>'#}
{#//                                                                                    +'</div>'#}
{#//                                                                                +'</div>'#}
{#//                                                                                +'<div class="row" >'#}
{#//                                                                                    +'<div class="col-md-offset-5 col-md-7" >'#}
{#//                                                                                        +'<hr style="margin: -5px -20px;border: 0.2px #504A62 solid;" >'#}
{#//                                                                                    +'</div>'#}
{#//                                                                                +'</div>'#}
{#//                                                                            +'</div>'#}
{#//                                                                        +'</div>'#}
                                                                        {#+'<div class="row" style="overflow-y: auto;max-height: 98px;overflow-x: hidden;">'#}
                                                                            {#+'<div class="col-md-12">'#}
                                                                                {#+'<div class="row">';#}
                                                                                {#var compt = null ;#}
                                                                                {#for (var key in obj2[0]) {#}
                                                                                    {#html2 += '<div class="col-md-8" style="margin-bottom: -8px;">'#}
                                                                                        {#+'<p>'+key+'</p>'#}
                                                                                    {#+'</div>'#}
                                                                                    {#+'<div class="col-md-4" style="margin-bottom: -8px;">'#}
                                                                                        {#+'<p style="font-size: 1.2em;">'+obj2[0][key]+'</p>'#}
                                                                                    {#+'</div>';#}
                                                                                    {#compt = compt + parseInt(obj2[0][key]);#}
                                                                                {#}#}

                                                                                {#if (compt !== null) {#}
                                                                                    {#html2 += '<div class="col-md-8" style="margin-bottom: -8px;">'#}
                                                                                        {#+ '<p style="font-size: 1.2em;">Total : ' + compt + ' articles</p>';#}
                                                                                        {#if (obj2[1] != null && obj2[1].length !== 0) {#}
                                                                                            {#html2 += '<hr style="border: 1px #504A62 solid;">';#}
                                                                                        {#}#}
                                                                                        {#html2 += '</div>'#}
                                                                                        {#+ '</div>';#}
                                                                                {#}else{#}
                                                                                    {#html2 += '<div class="col-md-8" style="margin-bottom: -8px;">'#}
                                                                                        {#+ '<p style="font-size: 1.2em;">Pas d\'articles enregistrés</p>'#}
                                                                                        {#+ '</div>'#}
                                                                                        {#+ '</div>';#}
                                                                                {#}#}

                                                                                {#for (var key in obj2[1]) {#}
                                                                                    {#html2 += '<div class="col-md-8" style="margin-bottom: -8px;">'#}
                                                                                        {#+'<p>'+key+'</p>'#}
                                                                                        {#+'</div>'#}
                                                                                        {#+'<div class="col-md-4" style="margin-bottom: -8px;">'#}
                                                                                        {#+'<p style="font-size: 1.2em;">'+obj2[1][key]+'</p>'#}
                                                                                        {#+'</div>';#}

                                                                                {#}#}

                                                                                {#if (app === '416') {#}
                                                                                    {#var url = '{{ path('tmd_prod_syntheseArtCoke', {'date': 'data' }) }}';#}
                                                                                    {#url = url.replace("data", date);#}
                                                                                    {#html2 += '<a href=' + url + ' style="margin-bottom: 9px;" type="button" class="btn btn-default btn-xs"   >Synthese Nb bouteilles</a>';#}
                                                                                {#}#}



                                                                        {#html2 +='</div>'#}
                                                                    {#+'</div>'#}
                                                                {#+'</div>'#}
                                                            {#+'</div>'#}
                                                        {#+'</div>'#}
                                                    {#+'</div>'#}
                                                {#+'</div>';#}

                    {#$("#rempliCalendar2").html(html2);#}

                {#}#}
            {#})#}
        {#}#}

    {#</script>#}



    {# ###   lien  BL Attente PROD  ### #}
    <script type="text/javascript">

        $(document).ready(function(){
            var initbl = 0;

            function initialiseInitBL()
            {
                initbl = 0;
            }

            $(".toggleable").hide();
            function afficherProfile($obj){
                var annonce = $obj.attr('id');
                if (initbl === annonce)
                {
                    $("#afficherProfile".concat(annonce)).hide();
                    initialiseInitBL() ;
                }
                else {
                    $.ajax({
                        url: "{{ path('tmd_prod_donneBlNonProd') }}",
                        type: "POST",
                        data: 'annonce_idd=' + annonce,
                        dataType: "html",
                        contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",
                        complete: function (data) {

                            var json = data.responseText;
                            var obj = JSON.parse(json);
//                            var obj = objet['add'];
//                            var len = obj.length;
                            $("#afficherProfile".concat(annonce)).text(" ");

                            var afficheTout = false;
                            var titre = "Trackings:";
                            var html ="";

                            html+= tabTrackings(obj['add'], obj['add'].length, titre, afficheTout, html);




                            html += '<p style="text-align: left;font-size: 1.6em;margin: 10px;">Synthèse: </p><hr class="menutr">';

                            var art = obj['articles'];
                            var lenA = art.length;
                            html += '<div class="row"><div class="col-md-5" style="overflow: auto;max-height: 200px;"><table class="table table-hover table-bordered table-responsive" style="margin-left: 40px;z-index: 1;font-size: 1.2em;width: 90%;"><tr style="font-weight: bold;font-size: 1.2em;"><td>Article</td><td>Quantité</td></tr>';
                            for (var j = 0; j < lenA; j++) {

                                html += '<tr class="tabSyntheseBlanc"><td ';
                                if(!art[j]['flagart'] ){
                                    html+='Style="font-size: 1.2em;"';
                                }
                                html +='>' + art[j]['libelle'] + '</td><td ';

                                if(!art[j]['flagart']){
                                    html+='Style="font-size: 1.2em;"';
                                }
                                html+= '>' + art[j]['quantite'] + '</td></tr>';
                            }
                            html += '</table></div>';

                            var perso = obj['perso'];
                            var lenP = perso.length;
                            if ( lenP > 0 && obj['perso'][0]['perso1'].length > 0 ) {
                                html += '<div class="col-md-4" style="overflow: auto;max-height: 200px;"><table class="table table-hover table-bordered table-responsive" style="margin-left: 40px;z-index: 1;font-size: 1.2em;width: 70%;"><tr style="font-weight: bold;font-size: 1.2em;"><td>Perso 1</td><td>Perso 2</td></tr>';

                                for (var k = 0; k < lenP; k++) {

                                    html += '<tr class="tabSyntheseBlanc" ><td style="position: relative;">';
                                    if (perso[k][1] > 1) {
                                        html += '<span class="badge" style="font-size: 0.9em;background-color: #9698C9;padding: 3px;text-align: -moz-right;position: absolute;right: 0;margin-right: 5px;">' + perso[k][1] + '</span>';
                                    }
                                    html += perso[k]['perso1'] + '</td><td>' + perso[k]['perso2'] + '</td></tr>';
                                }
                                html += '</table></div>';
                            }
                            html += '</div>';

                            html += '<p style="text-align: left;font-size: 1.6em;margin: 10px;">Ajout date Depot/Production: </p><hr class="menutr">';




                            if (obj['add'][0]['dateDepot']['date'].split(" ")[0] === '-0001-11-30'){
                                html+= '<div class="row">'
                                            +'<div class="col-md-12">'
                                                +'<p style="font-size: 1.6em;width: 150px;text-align: left;margin-left: 10px;">Date de depôt: </p>'
                                            +'</div>'
                                            +'<div class="col-md-offset-1 col-md-2">'
                                                +'<div id="retourdatedepotOk">'
                                                    +'<div class="input-group date" data-provide="datepicker"  style="width: 150px;">'
                                                        +'<input id="dateDepotValue" type="text" class="form-control" >'
                                                            +'<div class="input-group-addon">'
                                                                +'<span class="glyphicon glyphicon-th"></span>'
                                                            +'</div>'
                                                    +'</div>'
                                                +'</div>'
                                            +'</div>'
                                            +'<div class="col-md-2" id="retourdatedepotBouton" style="text-align: left;">'
                                                        +'<button class="btn btn-default" onclick="valideDateDepot('+annonce+')" >Valide</button>'
                                            +'</div>'
                                            +'<div class="col-md-12" id="retourdatedepot" style="display: none;text-align: left;margin-left: 10px;">'
                                            +'</div>'
                                        +'</div>';

                            }
                            else{
                                html+='<div class="row">'
                                            +'<div class="col-md-12">'
                                                +'<p style="font-size: 1.6em;width: 150px;text-align: left;margin-left: 10px;">Date de depôt: </p>'
                                            +'</div>'
                                            +'<div class="col-md-12" style="text-align: left;margin-left: 10px;">'
                                                +'<p style="font-size: 1.8em;">'+obj['add'][0]['dateDepot']['date'].split(" ")[0]+'</p>'
                                            +'</div>'
                                      +'</div>';

                            }

                            html+= '<div id="dateProductionAValide"';
                            if (obj['add'][0]['dateDepot']['date'].split(" ")[0] !== '-0001-11-30'){

                            }
                            else{
                                html+=' style="display: none;"';
                            }
                           html += '<div class="row">'
                                            +'<div class="col-md-12">'
                                                +'<p style="font-size: 1.6em;width: 150px;text-align: left;margin-left: 10px;">Date de Production: </p>'
                                            +'</div>'
                                            +'<div class="col-md-offset-1 col-md-2">'
                                                    +'<div id="gggf" class="input-group date " data-provide="datepicker" style="width: 150px;">'
                                                        +'<input id="dateProductionValue" type="text" class="form-control" >'
                                                            +'<div class="input-group-addon">'
                                                                +'<span class="glyphicon glyphicon-th"></span>'
                                                            +'</div>'
                                                    +'</div>'
                                            +'</div>'
                                            +'<div class="col-md-2" style="text-align: left;">'
                                                        +'<button class="btn btn-default" onclick="valideDateProduction('+annonce+')" >Valide</button>'
                                            +'</div>'
                                    +'</div>';


                            var expor = "{{ path('tmd_prod_exportTrackings', {'idFile': 'kannonce' ,'prod': '0' }) }}";
                            expor = expor.replace("kannonce", annonce);
                            html += '<p style="text-align: left;font-size: 1.6em;margin: 10px;">Export: </p><hr class="menutr">';
                            html+= '<p style="text-align: left;margin-left: 13px;"><a href="'+expor+'"  class="btn btn-success btn-xs" role="button">Export</a></p></div>';

                            $(".toggleable").hide();
                            $("#afficherProfile".concat(annonce)).append(html);
                            $("#afficherProfile".concat(annonce)).show();
                            initbl = annonce;
                        }
                    });
                }
            }

            $('.ProfilMini').click( function(event){
                $(".toggleableFile").hide();
                afficherProfile($(this));

            });


        });
    </script>

    <script>
        function donneBLCorrespondPerso(bl){
            var elmnt = document.getElementById(bl);

                elmnt.scrollIntoView();
                elmnt.style.backgroundColor = "#DFD8DF";

        }
    </script>



    {#recupre datedepot#}
    <script>
      function valideDateDepot(idFile) {
//          var idFile = idFile;


          var dateObject = $("#dateDepotValue").datepicker("getDate");
//          var dateString = moment(dateObject).format('YYYY-MM-DD')
          var dateString = $.datepicker.formatDate("yy-mm-dd", dateObject);
//          var dateString = moment(dateObject).format('YYYY-MM-DD');
          $.ajax({
              url: "{{ path('tmd_prod_modifDateDepot') }}",
              type: "POST",
              data: {idFile:  idFile,dateDepot:  dateString },
              dataType: "html",
              contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",
              complete: function (data) {

                  var json = data.responseText;
                  var objet = JSON.parse(json);
                  var len = objet.length;
                document.getElementById('retourdatedepotBouton').style.display = 'none';
                document.getElementById('retourdatedepotOk').style.display = 'none';
                var htmlr = '<p style="font-size: 1.8em;">'+objet+'</p>';
                $("#retourdatedepot").append(htmlr);
                document.getElementById('retourdatedepot').style.display = '';
                document.getElementById('dateProductionAValide').style.display = '';


              }
          })
      }


    </script>

    {#recupre dateProduction#}
    <script>
        function valideDateProduction(idFile) {
//          var idFile = idFile;
            var dateObject = $("#dateProductionValue").datepicker("getDate");
            var dateString = $.datepicker.formatDate("yy-mm-dd", dateObject);
            $.ajax({
                url: "{{ path('tmd_prod_modifDateProduction') }}",
                type: "POST",
                data: {idFile:  idFile,dateProd:  dateString },
                dataType: "html",
                contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",
                complete: function (data) {

                    document.location.reload(true);


                }
            })
        }


    </script>



    {# ###   lien  trackings par fichier  ### #}
    <script type="text/javascript">
        $(document).ready(function(){
            var init = 0;


            $(".toggleableFile").hide();
            function afficherProfileFile($obj){
                var  annonce  = $obj.attr('id');
                if (init === annonce)
                {
                    $("#afficherProfileFile".concat(annonce)).hide();
                    init = 0 ;
                }
                else {
                    $.ajax({
                        url: "{{ path('tmd_prod_donneTrackingsByFile') }}",
                        type: "POST",
                        data: 'annonce_idbl=' + annonce,
                        dataType: "html",
                        contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",
                        complete: function (data) {

                                var json = data.responseText;
                                var obj = JSON.parse(json);
                                var len = obj['add'].length;

                                var afficheTout = false;

                                if ( len != 0) {
//
                                    var titre = "Trackings:";
                                    var html ="";

                                    html+= tabTrackings(obj['add'], len, titre, afficheTout, html);

                                    var expor = "{{ path('tmd_prod_exportTrackings', {'idFile': 'Vannonce' ,'prod': '1' }) }}";
                                    expor = expor.replace("Vannonce", annonce);

                                    html += '<p style="text-align: left;font-size: 1.6em;margin: 10px;">Synthèse: </p><hr class="menutr">';
                                    var art = obj['articles'];
                                    var lenA = art.length;
                                    html += '<div class="row"><div class="col-md-5" style="overflow: auto;height: 200px;"><table class="table table-hover table-bordered table-responsive" style="margin-left: 40px;z-index: 1;font-size: 1.2em;width: 90%;"><tr style="font-weight: bold;font-size: 1.2em;"><td>Article</td><td>Quantité</td></tr>';
                                    for (var j = 0; j < lenA; j++) {

                                        html += '<tr class="tabSyntheseBlanc"><td ';
                                        if(!art[j]['flagart'] ){
                                            html+='Style="font-size: 1.2em;"';
                                        }
                                        html +='>' + art[j]['libelle'] + '</td><td ';

                                        if(!art[j]['flagart']){
                                            html+='Style="font-size: 1.2em;"';
                                        }
                                        html+= '>' + art[j]['quantite'] + '</td></tr>';
                                    }
                                    html += '</table></div>';

                                    var perso = obj['perso'];
                                    var lenP = perso.length;
                                    if ( lenP > 1 && obj['perso'][0]['perso1'].length > 0) {
                                        html += '<div class="col-md-4" style="overflow: auto;height: 200px;"><table class="table table-hover table-bordered table-responsive" style="margin-left: 40px;z-index: 1;font-size: 1.2em;width: 70%;"><tr style="font-weight: bold;font-size: 1.2em;"><td>Perso 1</td><td>Perso 2</td></tr>';

                                        for (var k = 0; k < lenP; k++) {

                                            html += '<tr class="tabSyntheseBlanc" ><td style="position: relative;">';
                                            if (perso[k][1] > 1) {
                                                html += '<span class="badge" style="font-size: 0.9em;background-color: #9698C9;padding: 3px;text-align: -moz-right;position: absolute;right: 0;margin-right: 5px;">' + perso[k][1] + '</span>';
                                            }
                                            html += perso[k]['perso1'] + '</td><td>' + perso[k]['perso2'] + '</td></tr>';
                                        }
                                        html += '</table></div>';
                                    }
                                    html += '</div>';

                                    html += '<p style="text-align: left;font-size: 1.6em;margin: 10px;">Export: </p><hr class="menutr">';

                                    html +=  '<p><a href="'+expor+'"  class="btn btn-success btn-xs" role="button">Export</a></p></div>'

                                    $(".toggleableFile").hide();
                                    $("#afficherProfileFile".concat(annonce)).html(html);
                                    $("#afficherProfileFile".concat(annonce)).show();
                                    init = annonce;
                                }

                        }
                    });
                }
            }

            $('.ProfilFile').click( function(event){
                $(".toggleable").hide();
                afficherProfileFile($(this));

            });

        });
    </script>

    {#details des articles#}
    <script type="text/javascript">


            function afficherArticle(numBl){


                $.ajax({
                    url: "{{ path('tmd_prod_donneArticleByBl') }}",
                    type: "POST",
                    data: 'numBl=' + numBl,
                    dataType: "html",
                    contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",
                    complete: function (data) {

                        var json = data.responseText;
                        var obj = JSON.parse(json);
                        var len = obj.length;
                        if ( len != 0) {
//                                    $("#afficherProfileFile".concat(annonce)).text(" ");
                            var html = '<p style="font-size: 1.6em;">Articles du n° de BL '+obj[0]['numbl']+': </p>';


                            html += ('<div><table class="table table-hover table-bordered table-responsive" style="z-index: 1;font-size: 1.2em;"><tr style="font-weight: bold;font-size: 1.2em;"><td>Article</td><td>Quantité</td></tr>');
                            for (var i = 0; i < len; i++) {
                                if (!obj[i]['flagart'] ) {
                                    html += '<tr><td>' + obj[i]['libelle'] + '</td><td>' + obj[i]['quantite'] + '</td></tr>';
                                }
                            }
                            html += '</table>';



                            $("#modalArticleContenu").html(html);
                        }

                        var modal = document.getElementById('myModal');

                        modal.style.display = "block";




                    }

                });


                }


    </script>

    {#modal article#}
    <script>

        var modal = document.getElementById('myModal');
        var span = document.getElementsByClassName("closeArticle")[0];
        window.onclick = function(event) {
            if (event.target === modal) {
                modal.style.display = "none";
            }
        }
        span.onclick = function() {
            modal.style.display = "none";
        }



    </script>

    {#Paginator#}
    <script type="text/JavaScript">
        function nbPaginator(targ,selObj,restore){
            eval(targ+".location='"+selObj.options[selObj.selectedIndex].value+"'");
            if (restore) selObj.selectedIndex=0;
        }
    </script>

    <script type="text/JavaScript">
        function afficheToutTrackings(){
            $('.toutAffiche').css('display','');
            $('.BoutonAfficheTout').css('display','none');
        }
    </script>

    {# ###   extraction trackings  ### #}
    <script>
//        $(document).ready(function() {
            var nbrSelect = parseInt($('#nbrSelect').html());
            var listFileTracking = [];
            eraseAllSelect();
            document.getElementById("inlineRadio4").checked = true;
            document.getElementById("date-range0").value = "";



            $('input:radio[name = modeTracking]').change(function(){
                var todays = new Date();

                var today = new Date(todays.getFullYear(), (todays.getMonth()), 1);
                document.getElementById("date-range0").value = "";

                if (this.value === '1') {
                    eraseAllSelect();
                    listFileTracking = [];

                    for (var i = 1; i < nbrSelect+1; i++)
                    {
                        var Sdate = new Date ($('#dateTracking'.concat(i)).html());
                        var date = new Date(Sdate.getFullYear(), (Sdate.getMonth())+1, 1);
                        if (+date === +today)
                        {
                             $('#trackSelect'.concat(i)).prop('checked', true);
                            listFileTracking.push($('#idFileTracking'.concat(i)).html())
                        }

                    }
                    exporter(listFileTracking);

                }
                if (this.value === '2') {
                    eraseAllSelect();
                    listFileTracking = [];
                    for (var i = 1; i < nbrSelect+1; i++)
                    {
                        var Sdate = new Date ($('#dateTracking'.concat(i)).html());
                        var date = new Date(Sdate.getFullYear(), (Sdate.getMonth()), 1);
                        if (+date === +today)
                        {
                              $('#trackSelect'.concat(i)).prop('checked', true);
                            listFileTracking.push($('#idFileTracking'.concat(i)).html())
                        }

                    }
                    exporter(listFileTracking);
                }
                if (this.value === '3')
                {
                    listFileTracking = [];
                    for (var i = 1; i < nbrSelect+1; i++)
                    {
                        $('#trackSelect'.concat(i)).prop('checked', true);
                        listFileTracking.push($('#idFileTracking'.concat(i)).html())
                    }
                   exporter(listFileTracking);
                }


            });

            if (!window['console']) {
                window.console = {};
                window.console.log = function () {
                };
            }

//            /**
//             * Assign an id to each of the demo elements for easy reference.
//             */
//            $('li.demo').each(function (index) {
//                $(this).attr('id', 'demo' + (index + 1));
//            });

            /*
             define a new language named "custom"
             */

//            $.dateRangePickerLanguages['custom'] =
//                {
//                    'selected': 'Choosed:',
//                    'days': 'Days',
//                    'apply': 'Close',
//                    'week-1': 'Mon',
//                    'week-2': 'Tue',
//                    'week-3': 'Wed',
//                    'week-4': 'Thu',
//                    'week-5': 'Fri',
//                    'week-6': 'Sat',
//                    'week-7': 'Sun',
//                    'month-name': ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
//                    'shortcuts': 'Shortcuts',
//                    'past': 'Past',
//                    '7days': '7days',
//                    '14days': '14days',
//                    '30days': '30days',
//                    'previous': 'Previous',
//                    'prev-week': 'Week',
//                    'prev-month': 'Month',
//                    'prev-quarter': 'Quarter',
//                    'prev-year': 'Year',
//                    'less-than': 'Date range should longer than %d days',
//                    'more-than': 'Date range should less than %d days',
//                    'default-more': 'Please select a date range longer than %d days',
//                    'default-less': 'Please select a date range less than %d days',
//                    'default-range': 'Please select a date range between %d and %d days',
//                    'default-default': 'This is costom language'
//                };

            $('#date-range0').dateRangePicker(
                {}).on('datepicker-first-date-selected', function (event, obj) {
                /* This event will be triggered when first date is selected */
                eraseAllSelect();
                document.getElementById("inlineRadio4").checked = true;
                // obj will be something like this:
                // {
                // 		date1: (Date object of the earlier date)
                // }
            })
                .on('datepicker-change', function (event, obj) {
                    /* This event will be triggered when second date is selected */
                    listFileTracking = [];

                    var dateTnf;
                    for (var i = 1; i < nbrSelect+1; i++)
                    {
                        dateTnf = new Date ($('#dateTracking'.concat(i)).html());




                            if ( moment(dateTnf).format('YYYY-MM-DD') >= moment(obj['date1']).format('YYYY-MM-DD') && moment(dateTnf).format('YYYY-MM-DD') <= moment(obj['date2']).format('YYYY-MM-DD'))
                            {
                                $('#trackSelect'.concat(i)).prop('checked', true);
                                listFileTracking.push($('#idFileTracking'.concat(i)).html())
                            }

                    }
                    exporter(listFileTracking);


//
                })
                .on('datepicker-apply', function (event, obj) {
                    /* This event will be triggered when user clicks on the apply button */
                })
                .on('datepicker-close', function () {
                    /* This event will be triggered before date range picker close animation */
                })
                .on('datepicker-closed', function () {
                    /* This event will be triggered after date range picker close animation */
                })
                .on('datepicker-open', function () {
                    /* This event will be triggered before date range picker open animation */
                })
                .on('datepicker-opened', function () {
                    /* This event will be triggered after date range picker open animation */
                    eraseAllSelect();
                });





            function eraseAllSelect(){
                for (var i = 0; i < nbrSelect+1; i++)
                {
                    $('#trackSelect'.concat(i)).attr('checked', false);
                }
            }

            function exporter(data)
            {
                {#if ( typeof data !== 'undefined' && data ){#}
                    {#var sess = '{{ app.session.set('test', dataf) }}';#}
                    {#sess = sess.replace("dataf", data);#}
                {#}#}

                {#{{ dump(app.session.get('test')) }}#}
                var html = '';
                var url = '{{ path('tmd_prod_exportTrackings', {'idFile': 'data' ,'prod': '1' }) }}';
                url = url.replace("data", data);


                html += '<a href='+url+'  class="btn btn-success btn-xs" role="button">Export</a>'
                $("#exportTracking").html(html);
                $("#exportTracking").css('display', '');
            }


            $('input:checkbox[type = "checkbox"]').change(function () {
                if ($(this).is(':checked')) {
                    listFileTracking.push($(this).val());
                    exporter(listFileTracking);
                } else {

                        for (var k =0 ; k < listFileTracking.length ; k++)
                        {
                            if (listFileTracking[k] == $(this).val())
                            {
                               listFileTracking.splice(k,1);
                            }
                        }
                    exporter(listFileTracking);
                }
                if (listFileTracking == 0)
                {
                    $("#exportTracking").css('display', 'none');
                }
            });

//        });
    </script>



    <script type="text/javascript">
        $(document).ready(setup_web_print);
    </script>


    <script>
        $(document).ready(function() {
            if ($('#entered_name').val() != 0)
            {
                sendData();
            }

        })


    </script>



    {#recherche nom,tracking, commandes#}
    <script type="text/javascript">
        function sendDatarechercheCmd(){
            var cmd =  $('#entered_cmd').val();
            var idClient =  $('#idClient').text();
            var idope =  $('#idOperation').text();

            $.ajax({
                url: "{{ path('tmd_prod_rechercheCmd') }}",
                type: "POST",
                data: {cmd:  cmd,idClient:  idClient,idope: idope },
                dataType: "html",
                contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",
                complete: function (data) {

                    var json = data.responseText;
                    var obj = JSON.parse(json);
                    var len = obj.length;

                    if ( len != 0) {


                        var titre = "Resultats: ("+len+") pour la recherche: \""+cmd+'"';
                        var html ="";
                        var afficheTout=false;

                        html += tabTrackings(obj, len, titre, afficheTout, html);


//                        var html = '<div class="fondBlanc"><p style="text-align: left;font-size: 1.6em;margin: 10px;">Resultats: ('+len+') pour la recherche "'+cmd+'" </p>';
//
//
//                        html += ('<div style="overflow: auto;"><table class="table table-hover table-bordered table-responsive" style="margin-left: 40px;z-index: 1;font-size: 1.2em;"><tr style="font-weight: bold;font-size: 1.2em;"><td>n° BL</td><td>Ref Client</td><td>exp_ref</td><td>num_cmde_client</td>' +
//                        '<td>date_entree</td><td>Destinataire</td><td>rue</td><td>ad2</td><td>dest_cp</td><td>dest_ville</td>' +
//                        '<td>dest_pays</td><td>n° Tracking</td><td>dateProd</td><td>ModExp</td><td>Poids</td><td>Qté</td><td>Statut_livraison</td></tr>');
//                        for (var i = 0; i < len; i++) {
//
//                            html += '<tr class="tabSyntheseBlanc"><td>' + obj[i]['numbl'] + '</td><td>' + obj[i]['refclient'] + '</td><td>' + obj[i]['expRef'] + '</td><td>' + obj[i][0]['numCmdeClient'] + '</td>' +
//                                '<td>' + obj[i]['dateInsert']['date'].split(" ")[0] + '</td><td>' + obj[i]['destinataire'] + '</td><td>' + obj[i]['destRue'] + '</td><td>' + obj[i]['destAd2'] +'</td>' +
//                                '<td>' + obj[i]['destCp'] + '</td><td>' + obj[i]['destVille'] + '</td><td>' + obj[i]['destPays'] + '</td><td>';
//                            if (obj[i][0]['modexp'] === "DPD" || obj[i][0]['modexp'] === "DPDPREDI" || obj[i][0]['modexp'] === "DPDRELAIS" )
//                            {
//                                html += '<a href="http://www.dpd.fr/traces_'+obj[i][0]['nColis']+'" target="_blank" >'+ obj[i][0]['nColis'] + '</a></td>';
//                            }
//                            else if (obj[i][0]['modexp'] === "CPRV" || obj[i][0]['modexp'] === "CPRVE" || obj[i][0]['modexp'] === "CPRVTC" || obj[i][0]['modexp'] === "CPRVT")
//                            {
//                                html += '<a href="https://www.colisprive.com/moncolis/pages/detailColis.aspx?numColis='+obj[i][0]['nColis']+'" target="_blank" >'+ obj[i][0]['nColis'] + '</a></td>';
//                            }
//                            else
//                            {
//                                html += obj[i][0]['nColis'] + '</td>';
//                            }
//                            html += '<td>' + obj[i][0]['dateProduction']['date'].split(" ")[0] + '</td><td>' + obj[i][0]['modexp'] + '</td><td>' + obj[i][0]['poids'] + '</td><td>' + obj[i][''] + '</td><td>' + obj[i]['statut'] + '</td></tr>';
//
//                        }
//                        html += '</table></div></div>';


                        {#var expor = "{{ path('tmd_prod_exportTrackings', {'idFile': 'Vannonce' }) }}";#}
                        {#expor = expor.replace("Vannonce", annonce);#}

                        {#html += '<p style="text-align: left;font-size: 1.6em;margin: 10px;">Synthèse: </p>' +#}
                            {#'<p><a href="'+expor+'"  class="btn btn-success btn-xs" role="button">Export</a></p></div>'#}


                        $("#resultatRecherche").html(html);
//                        $("#resultatRecherche").show();


                    }
                    else{
                        var htmlr = '<div class="fondBlanc"><p style="text-align: left;font-size: 1.6em;margin: 10px;">Pas de resultat pour la recherche: "'+cmd+'"</p>';
                        $("#resultatRecherche").html(htmlr);
                    }
                    document.getElementById("entered_cmd").value = "";

                }
            });
        }
    </script>

    {#tableau affiche trackings#}
    <script>
        function tabTrackings(obj, len, titre, afficheTout, html)
        {
            html += '<div class="fondBlanc " style="margin-bottom: 100px;"><p style="text-align: left;font-size: 1.6em;margin: 10px;">'+titre+' </p><hr class="menutr">';

            html += '<div style="overflow: auto;"><table class="table table-hover table-bordered " style="margin-left: 40px;z-index: 1;font-size: 1.2em;"><tr style="font-weight: bold;font-size: 1.2em;border-bottom: 2px solid #504A62"><td>Date fichier</td><td>N° BL</td><td>RefClient</td><td>Exp_ref</td><td>num_cmde_client</td>' +
            '<td>date Cmd</td><td>Destinataire</td><td style="padding: 0 50px 0 50px;">rue</td><td>ad2</td><td>ad3</td><td>ad4</td><td>ad5</td><td>ad6</td><td>dest_cp</td><td>dest_ville</td>' +
            '<td>dest_pays</td><td>n° Tracking</td><td>dateProd</td><td>ModExp</td><td>Poids (gr)</td><td>Qté</td><td>NumTrack</td><td>Date statut</td><td>Statut_livraison</td><td>Nb pages</td></tr>';
            for (var i = 0; i < len; i++) {

                html += '<tr id="'+ obj[i]['numbl'] +'" class="tabSyntheseBlanc toutAffiche"'
                if ( i > 15){
                    html+= 'style = "display: none;"';
                    afficheTout = true;
                }
                html+= '><td>' + moment(obj[i]['dateFile']['date'].split(" ")[0]).format('DD-MM-YYYY') + '</td><td >' + obj[i]['numbl'] + '</td><td>' + obj[i]['refclient'] + '</td><td>' + obj[i]['expRef'] + '</td><td>' + obj[i][0]['numCmdeClient'] + '</td>' +
                    '<td>';
                if(obj[i]['dateCmde']['date'].split(" ")[0] === '-0001-11-30' )
                {
                    html += '-</td>';
                }
                else
                {
                    html += moment(obj[i]['dateCmde']['date'].split(" ")[0]).format('DD-MM-YYYY') +'</td>'
                }
                html += '<td>' + obj[i]['destinataire'] + '</td><td>' + obj[i]['destRue'] + '</td><td>' + obj[i]['destAd2'] +'</td><td>' + obj[i]['destAd3'] +'</td><td>' +obj[i]['destAd4'] +'</td><td>' +obj[i]['destAd5'] +'</td><td>' +obj[i]['destAd6'] +'</td>' +
                    '<td>' + obj[i]['destCp'] + '</td><td>' + obj[i]['destVille'] + '</td><td>' + obj[i]['destPays'] + '</td><td>';
                if (obj[i][0]['modexp'] === "DPD" || obj[i][0]['modexp'] === "DPDPREDI" || obj[i][0]['modexp'] === "DPDRELAIS" )
                {
                    html += '<a href="http://www.dpd.fr/traces_'+obj[i][0]['nColis']+'" target="_blank" >'+ obj[i][0]['nColis'] + '</a></td>';
                }
                else if (obj[i][0]['modexp'] === "CPRV" || obj[i][0]['modexp'] === "CPRVE" || obj[i][0]['modexp'] === "CPRVTC" || obj[i][0]['modexp'] === "CPRVT")
                {
                    html += '<a href="https://www.colisprive.com/moncolis/pages/detailColis.aspx?numColis='+obj[i][0]['nColis']+'" target="_blank" >'+ obj[i][0]['nColis'] + '</a></td>';
                }
                else if (obj[i][0]['modexp'] === "COL" || obj[i][0]['modexp'] === "COLI" || obj[i][0]['modexp'] === "COLD" || obj[i][0]['modexp'] === "COM")
                {
                    html += '<a href="https://www.laposte.fr/particulier/outils/suivre-vos-envois?code='+obj[i][0]['nColis']+'" target="_blank" >'+ obj[i][0]['nColis'] + '</a></td>';
                }
                else
                {
                    html += obj[i][0]['nColis'] + '</td>';
                }
                if(obj[i][0]['dateProduction']['date'].split(" ")[0] === '-0001-11-30' )
                {
                    html += '<td>-</td>';
                }
                else
                {
                    html += '<td>'+ moment(obj[i][0]['dateProduction']['date'].split(" ")[0]).format('DD-MM-YYYY')+'</td>'
                }

                html+= '<td>' + obj[i][0]['modexp'] + '</td><td>' + (obj[i]['poidsReel']).replace(/^0+/, "") + '</td>';
                if ( obj[i]['quantite'] > 0 ) {
                    html += '<td><a id="'+obj[i]['numbl']+'" onclick="afficherArticle('+obj[i]['numbl']+')" href="#'+obj[i]['numbl']+'">details</a></td>'
                }
                else
                {
                    html += '<td>-</td>'

                }
                if ( ( obj[i]['numTrack']) === "" && obj[i]['numTrack'] === 'undefined' ){
                    html += '<td>-</td>';
                }
                else{
                    html += '<td>'+obj[i]['numTrack']+'</td>';
                }
                if ( obj[i]['statut']['dateStatut'] === "" || obj[i]['statut']['dateStatut']['date'].split(" ")[0] === '-0001-11-30'){
                    html += '<td>-</td>';
                }
                else{
                    html += '<td>'+ moment(obj[i]['statut']['dateStatut']['date'].split(" ")[0]).format('DD-MM-YYYY') + '</td>';
                }
                if ( ( obj[i]['statut']['libelle']) === ""){
                    html += '<td>-</td>';
                }
                else{
                    html += '<td>'+obj[i]['statut']['libelle'] + '</td>';
                }
                html +=  '<td>'+obj[i]['nbpages']+ '</td>';
            }

            html += '</tr></table></div>';

            if (afficheTout) {
                html += '<p class="BoutonAfficheTout" style="font-size: 1.4em;cursor: pointer;" onclick="afficheToutTrackings()" href="#">Tout afficher ..</p>'

            }

            return html;
        }
    </script>

    <script>

        function afficherArticle(numBl){


            $.ajax({
                url: "{{ path('tmd_prod_donneArticleByBl') }}",
                type: "POST",
                data: 'numBl=' + numBl,
                dataType: "html",
                contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",
                complete: function (data) {

                    var json = data.responseText;
                    var obj = JSON.parse(json);
                    var len = obj.length;
                    if ( len != 0) {
//                                    $("#afficherProfileFile".concat(annonce)).text(" ");
                        var html = '<p style="font-size: 1.6em;">Articles du n° de BL '+obj[0]['numbl']+': </p>';


                        html += ('<div><table class="table table-hover table-bordered table-responsive" style="z-index: 1;font-size: 1.2em;"><tr style="font-weight: bold;font-size: 1.2em;"><td>Article</td><td>Quantité</td></tr>');
                        for (var i = 0; i < len; i++) {
                            if (!obj[i]['flagart'] ) {
                                html += '<tr><td>' + obj[i]['libelle'] + '</td><td>' + obj[i]['quantite'] + '</td></tr>';
                            }
                        }
                        html += '</table>';



                        $("#modalArticleContenu").html(html);
                    }

                    var modal = document.getElementById('myModal');

                    modal.style.display = "block";




                }

            });


        }
    </script>


    <script>
        function menuSG(){
            document.getElementById('menuSGclick').style.display = "";
            document.getElementById('menuSGcache').style.display = "none";
        }

        function menuGestions(){
            document.getElementById('menuGestionsclick').style.display = "";
            document.getElementById('menuGestionscache').style.display = "none";
        }

        function menuSuiviPlis(){
            document.getElementById('menuSuiviPlisclick').style.display = "";
            document.getElementById('menuSuiviPliscache').style.display = "none";
        }
    </script>

    {#<script>#}
        {#function syntheseNbArticle(dateff){#}
            {#console.log(dateff);#}
            {#$.ajax({#}
                {#url: "{{ path('tmd_prod_syntheseArtCoke') }}",#}
                {#type: "POST",#}
                {#data: 'numBl=' + numBl,#}
                {#dataType: "html",#}
                {#contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",#}
                {#complete: function (data) {#}

                    {#var json = data.responseText;#}
                    {#var obj = JSON.parse(json);#}
                    {#var len = obj.length;#}
                    {#if ( len != 0) {#}
{#//                                    $("#afficherProfileFile".concat(annonce)).text(" ");#}
                        {#var html = '<p style="font-size: 1.6em;">Articles du n° de BL '+obj[0]['numbl']+': </p>';#}


                        {#html += ('<div><table class="table table-hover table-bordered table-responsive" style="z-index: 1;font-size: 1.2em;"><tr style="font-weight: bold;font-size: 1.2em;"><td>Article</td><td>Quantité</td></tr>');#}
                        {#for (var i = 0; i < len; i++) {#}
                            {#if (!obj[i]['flagart'] ) {#}
                                {#html += '<tr><td>' + obj[i]['libelle'] + '</td><td>' + obj[i]['quantite'] + '</td></tr>';#}
                            {#}#}
                        {#}#}
                        {#html += '</table>';#}



                        {#$("#modalArticleContenu").html(html);#}
                    {#}#}

                    {#var modal = document.getElementById('myModal');#}

                    {#modal.style.display = "block";#}




                {#}#}

            {#});#}

        {#}#}
    {#</script>#}


{% endblock %}

</body>
</html>