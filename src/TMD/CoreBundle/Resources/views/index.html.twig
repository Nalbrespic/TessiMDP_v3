{# app/Resources/views/layout.html.twig #}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>{% block title %}Tessi MD - Portail{% endblock %}</title>

    {% block stylesheets %}

        {#<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">#}
        {#<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">#}
        <link rel="stylesheet" href="{{ asset('jquery-ui-1.12.1/jquery-ui.theme.min.css') }}">
        <link rel="stylesheet" href="{{ asset('bootstrap-3.3.7/css/bootstrap.min.css') }}">

        <link rel="stylesheet" href="{{ asset('css/fullcalendar.css') }}">
        <link rel="stylesheet" href="{{ asset('Multi-level-Vertical-Accordion/src/lazeemenu.css') }}">
        <link rel="stylesheet" href="{{ asset('style.css') }}">
        <link rel="stylesheet" href="{{ asset('rangeDatePicker/jquery-date-range-picker-master/dist/daterangepicker.css') }}">
        <link rel="stylesheet" href="{{ asset('datepicker.css') }}">
        <link rel="stylesheet" href="https://printjs-4de6.kxcdn.com/print.min.css">

    {% endblock %}
</head>


<div class="container-fluid" style="position: relative; width: 99%;">
    <div class="row bandeau">
        {#<div id="header" class="jumbotron" style="margin-top: 9px;background-color: #f4f2f7;height: 103px;margin-left: 14px;margin-right: 14px;">#}
            {#<a href="{{ path('tmd_core_homepage') }}"><img id="imgHeader" src="{{ asset('Images/logo.png') }}" style="float: left;"></a>#}
            {#<h1 id="texteHeadertessi" style="color: #514958"><span style="font-family: Colaborate">tessi</span> <span style="font-family: ColaborateThin; font-size: 0.6em;"> customer marketing </span></h1>#}

            {#<div style="text-align: right;margin-top: -22px;">{% if app.user.username is defined %}#}
                                {#Bonjour {{ app.user.username }}#}
                                {#<a href="{{ path('logout') }}" >Deconnexion</a></div>#}
                             {#{% else %}#}
                                {#<a href="{{ path('login') }}" >Connexion</a></div>#}
                             {#{% endif %}#}
        {#</div>#}
        <div id="header" class="jumbotron" style="margin-top: 9px;background-color: #28274D;height: 103px;margin-left: 14px;margin-right: 14px;">
            <a href="{{ path('tmd_core_homepage') }}">
                <div>
                    <svg id="texteHeadertessi" style="position: absolute;margin-top: 34px;margin-left: 90px;" width="157px" height="49px" viewBox="0 0 157 49" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <!-- Generator: sketchtool 52.5 (67469) - http://www.bohemiancoding.com/sketch -->
                        <title>BF05F063-A4D9-4C81-A213-F60231D63C3B</title>
                        <desc>Created with sketchtool.</desc>
                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g id="HOME-V1" transform="translate(-93.000000, -50.000000)">
                                <g id="00-HEAD">
                                    <g id="HEADER" transform="translate(93.000000, 35.000000)">
                                        <g id="Icon/Logo/Blanc" transform="translate(0.000000, 15.000000)">
                                            <g id="Logo">
                                                <path d="M9.39951283,34.8656903 L9.39951283,29.4822079 L9.40133391,29.4822079 L9.3954154,19.3029615 L18.789465,19.3025073 L18.789465,11.7679937 L9.3954154,11.7679937 L9.3954154,0 L0,6.09746489 L0.0059185153,11.5922232 L0.0059185153,20.9275896 L0.0059185153,29.4822079 L0.012292301,29.4822079 L0.0063737857,35.0968717 C0.0063737857,43.4693609 5.47280557,49 15.0207366,49 C16.4115876,49 17.718669,48.876461 18.84,48.6834314 L18.84,40.8959355 C18.0605771,41.0303749 17.2529274,41.0880567 16.4061244,41.0880567 C11.1705147,41.0880567 9.39951283,38.5536914 9.39951283,34.8656903" id="Fill-1" fill="#FFFFFF"></path>
                                                <polygon id="Fill-3" fill="#FFFFFF" points="146.952 49 147.125075 48.8939498 157 42.9146939 157 12.25 146.952 12.25"></polygon>
                                                <path d="M34.553452,26.4428707 C35.5600466,20.9787353 39.191745,18.1638096 43.9137303,18.1638096 C48.6288556,18.1638096 51.7991028,20.7487988 52.5752005,26.4428707 L34.553452,26.4428707 Z M43.8336967,11.025 C33.0049152,11.025 25.12,18.8504754 25.12,30.0913161 C25.12,41.1022203 32.1556438,49 43.7568643,49 C54.3437155,49 59.614503,43.5048771 61.1977973,37.3096155 L52.2047591,37.3096155 C51.3271329,39.3961095 49.1113442,41.6308048 44.1446845,41.6308048 C38.7302938,41.6308048 35.0953941,38.2154395 34.3997874,32.1405353 L61.544,32.1405353 L61.544,30.2422119 C61.544,18.6241317 55.049841,11.025 43.8336967,11.025 Z" id="Fill-6" fill="#FFFFFF"></path>
                                                <path d="M78.0488913,21.6580898 C78.0488913,19.3035141 80.1096168,17.7851428 84.6275593,17.7851428 C88.7485415,17.7851428 91.2057586,19.3798593 91.4433724,22.6456374 L99.9243566,22.6456374 C99.7654788,15.2778767 94.4554903,11.025 84.7062952,11.025 C74.7991596,11.025 68.6961879,15.2028787 68.6961879,21.8857781 C68.6961879,36.7717446 91.1260853,30.9241515 91.1260853,38.4432554 C91.1260853,40.7969329 88.986624,42.2403063 83.9934539,42.2403063 C78.6829967,42.2403063 76.4638621,40.4928994 76.2257796,37.3030174 L67.824,37.2280195 C67.9036733,44.7471233 73.2136617,49 83.9934539,49 C94.2966124,49 100.558462,44.8984665 100.479257,38.2146689 C100.479257,22.8737748 78.0488913,29.0249524 78.0488913,21.6580898" id="Fill-8" fill="#FFFFFF"></path>
                                                <path d="M116.984567,21.6580898 C116.984567,19.3035141 119.045321,17.7851428 123.563327,17.7851428 C127.684836,17.7851428 130.141619,19.3798593 130.379705,22.6456374 L138.860809,22.6456374 C138.70146,15.2778767 133.391397,11.025 123.642533,11.025 C113.735258,11.025 107.6322,15.2028787 107.6322,21.8857781 C107.6322,36.7717446 130.061945,30.9241515 130.061945,38.4432554 C130.061945,40.7969329 127.922922,42.2403063 122.928744,42.2403063 C117.618681,42.2403063 115.399984,40.4928994 115.161429,37.3030174 L106.76,37.2280195 C106.839674,44.7471233 112.149738,49 122.928744,49 C133.233454,49 139.494923,44.8984665 139.415249,38.2146689 C139.415249,22.8737748 116.984567,29.0249524 116.984567,21.6580898" id="Fill-10" fill="#FFFFFF"></path>
                                                <polygon id="Clip-13" points="0 49 157 49 157 0 0 0"></polygon>
                                                <polygon id="Fill-12" fill="#FFFFFF" points="146.952 7.35 157 7.35 157 0 146.952 0"></polygon>
                                            </g>
                                        </g>
                                    </g>
                                </g>
                            </g>
                        </g>
                    </svg>
                    <img id="imgHeader" src="{{ asset('Images/2019Tessi_FondEcran.png') }}" style="position: absolute;width: 103px;margin-top: -1px;margin-left: -60px;">
                </div></a>


            {#<div style="text-align: right;margin-top: -22px;">{% if app.user.username is defined %}#}
            {#Bonjour {{ app.user.username }}#}
            {#<a href="{{ path('logout') }}" >Deconnexion</a></div>#}
            {#{% else %}#}
            {#<a href="{{ path('login') }}" >Connexion</a></div>#}
            {#{% endif %}#}
        </div>

    </div>

    <nav id="hideHeaderNavConnec" class="navbar navbar-default" style="position: absolute;width: 99%;top: 0;/*! margin-right: 34px; */padding-right: 64px;background-color: transparent;border: inherit;margin-top: 92px;">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->

            <!-- Collect the nav links, forms, and other content for toggling -->


                <ul class="nav navbar-nav navbar-right barreConnexion" style="font-family:ColaborateReg;" >
                    {% if app.user.username is defined %}
                        <li style="color: #FFFFFF;">Bonjour <span style="font-size: 1.1em;color: #FFFFFF;"> {{ app.user.username }} -</span></li>
                        <li><a href="{{ path('logout') }}" style="padding: inherit;padding-left:12px;font-size: 0.9em;margin-top: 2px;color: #FFFFFF;">Deconnexion</a></li>
                    {% else %}
                        <li><a href="{{ path('login') }}" style="padding: inherit;padding-left:12px;font-size: 0.9em;margin-top: 2px;color: #FFFFFF;">Connexion</a></li>
                    {% endif %}
                    {% if is_granted('ROLE_SUPER_PROD') %}
                        <li class="dropdown" >
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="padding: inherit;padding-left:12px;margin-top: 2px;font-size: 0.9em;color: #FFFFFF;">Configuration </a>
                            <ul class="dropdown-menu" style="color: #FFFFFF;">
                                <li class="dropdown-item"><a href="{{ path('tmd_config_addnews') }}">Ajout de News</a></li>
                                {% if is_granted('ROLE_ADMIN') %}<li class="dropdown-item"><a href="{{ path('tmd_config_homepage') }}">Gestion utilisateurs</a></li>{% endif %}
                                {#<li role="separator" class="divider"></li>#}
                                {#<li><a href="#">Separated link</a></li>#}
                            </ul>
                        </li>
                    {% endif %}
                </ul>
            </div><!-- /.navbar-collapse -->

    </nav>





</div>
<div class="container-fluid">
    <div class="row">
        <div id="menuGauche" class="col-md-2" {% block styleChild %}{% endblock %}>


            {% if is_granted('ROLE_ATC') or is_granted('ROLE_PROD') or is_granted('ROLE_TMS') %}
                <p class="ongletMenu">Suivi de production</p>
                <nav>
                    <ul class="nav menu shadow" style="background-color: #28274D;border-radius: 5px;margin-top: -26px;padding-top: 4px;padding-bottom: 4px;margin-right: 27px;">
                        <li><a onmouseover="this.style.color = 'palevioletred'" onmouseout="this.style.color = 'white'" href="{{ path('tmd_prod_client') }}">Suivi opération</a></li>
                        <li><a onmouseover="this.style.color = 'palevioletred'" onmouseout="this.style.color = 'white'" href="{{  path('tmd_prod_suiviCourant') }}">Opérations en cours</a></li>
                        {% if is_granted('ROLE_ATC') or is_granted('ROLE_PROD') %}<li><a onmouseover="this.style.color = 'palevioletred'" onmouseout="this.style.color = 'white'" href="{{  path('tmd_appli_verifEletion') }}">Suivi Election</a></li>{% endif %}
                    </ul>
                </nav>
            {% endif %}

            {% if is_granted('ROLE_USER_PROD') %}
                <p class="ongletMenu">App de production</p>
                <nav>
                    <ul class="nav menu shadow" style="background-color: #28274D;border-radius: 5px;margin-top: -26px;padding-top: 4px;padding-bottom: 4px;margin-right: 27px;">
                        <li ><a onclick="hideMenu()" onmouseover="this.style.color = 'palevioletred'" onmouseout="this.style.color = 'white'" href="{{ path('tmd_appli_production') }}">Etiquettes ZPL</a></li>
                        <li ><a onmouseover="this.style.color = 'palevioletred'" onmouseout="this.style.color = 'white'" href="{{ path('tmd_appli_cartepage') }}">Saisi cartes</a></li>
                        <li ><a onmouseover="this.style.color = 'palevioletred'" onmouseout="this.style.color = 'white'" href="{{ path('tmd_appli_editStatut') }}">Statut Election</a></li>

                        </ul>
                </nav>
            {% endif %}


            {% if is_granted('ROLE_USER_PROD') %}
                <p class="ongletMenu">Production</p>
                <nav>
                    <ul class="nav menu shadow" style="background-color: #28274D;border-radius: 5px;margin-top: -26px;padding-top: 4px;padding-bottom: 4px;margin-right: 27px;">
                        <li ><a onmouseover="this.style.color = 'palevioletred'" onmouseout="this.style.color = 'white'" href="{{ path('tmd_coriolis_homepage') }}">Coriolis</a></li>
                    </ul>
                </nav>
            {% endif %}

            {% if is_granted('ROLE_USER_PROD') %}
                <p class="ongletMenu">Colissimo</p>
                <nav>
                    <ul class="nav menu shadow" style="background-color: #28274D;border-radius: 5px;margin-top: -26px;padding-top: 4px;padding-bottom: 4px;margin-right: 27px;">
                        <li ><a onmouseover="this.style.color = 'palevioletred'" onmouseout="this.style.color = 'white'" href="{{ path('tmd_appli_colissimo') }}">Bordereau remise</a></li>
                        {#<li ><a href="{{ path('tmd_appli_colissimoInfo') }}">Info colis</a></li>#}

                    </ul>
                </nav>
            {% endif %}


            {% if is_granted('ROLE_ATC') or is_granted('ROLE_PROD') %}
                <nav style="margin-right: 14px;margin-top: -22px;">
                            <ul id="menu-1" >
                                <li style="margin-right: 15px;">
                                    <h3 class="ongletMenu " style="margin-bottom: 20px;"><a class="arrow-btn" href="#" style="float: none;margin-left: -5px;color: white;font-family: ColaborateReg;font-size: 1.1em;width: 166px;outline-style: none;">Gestions</a></h3>
                                    <ul class="lz-menu nav menu " id="zindexmenu-1" style="background-color: #28274D;border-radius: 5px;margin-top: -26px;padding-top: 4px;padding-bottom: 12px;margin-left: 4px;box-shadow: 4px 2px 7px #504A62;margin-bottom: 7px;z-index: -10;">
                                        <li ><a style="padding-top: 13px;" href="http://tmdsws801/portail/interface_enregistrement/index.php" target="_blank">Suivi de production</a></li>
                                        {% if is_granted('ROLE_ADMIN') %}<li ><a href="{{ path('tmd_prod_addApplication') }}">Opération</a></li>{% endif %}
                                        <li><a href="{{ path('tmd_config_gestioncmd') }}" >Gestion Commandes</a></li>
                                        <li><a href="http://tmdsws801/portail/fiche_de_suivi/modif.php" target="_blank" >Gérer ATC/fichiers</a></li>
                                        <li ><a href="http://tmdsws801/portail/completer_enregistrement/index.php" target="_blank">Saisie production</a></li>
                                        <li ><a href="http://tmdsws801/portail/contenants/contenants_index.php" target="_blank">Cartons</a></li>
                                        <li ><a href="http://tmdsws801/portail/doublons/doublons_index.php" target="_blank">Doublons</a></li>
                                        <li ><a href="http://tmdsws801/portail/clients/index_clients.php" target="_blank">Clients</a></li>
                                        <li ><a href="http://tmdsws801/portail/chemins_fixes/index_chemins_fixes.php" target="_blank">Chemins fixes</a></li>
                                        <li ><a href="http://tmdsws801/portail/sfrLtrChq/sfrLtrChq.php" target="_blank">Lettres Cheque SFR</a></li>
                                        <li ><a href="http://tmdsws801/portail/fransat/index_fransat.php" target="_blank">Fransat</a></li>
                                        <span id="spanmenu-1"><li style="color: white;font-size: 0.6em;margin-left: 9px;font-family: initial;">Suivi de production</li>
                                                <li style="color: white;font-size: 0.6em;margin-left: 9px;font-family: initial;">Gérer ATC/fichiers</li>
                                             <li style="color: white;font-size: 0.6em;margin-left: 9px;font-family: initial;">Saisie production</li>
                                        </span>
                                    </ul>
                                </li>
                            </ul>
                </nav>
            {% endif %}


            {% if is_granted('ROLE_ATC') or is_granted('ROLE_PROD') %}
                <nav style="margin-right: 14px;margin-top: -22px;">
                    <ul id="menu-2" >
                        <li style="margin-right: 15px;">
                            <h3 class="ongletMenu " style="margin-bottom: 20px;"><a class="arrow-btn" href="#" style="float: none;margin-left: -5px;color: white;font-family: ColaborateReg;font-size: 1.1em;width: 166px;outline-style: none;">
                                    Suivi de Plis </a></h3>

                                <ul class="lz-menu nav menu " id="zindexmenu-1" style="background-color: #28274D;border-radius: 5px;margin-top: -26px;padding-top: 4px;padding-bottom: 12px;margin-left: 4px;box-shadow: 4px 2px 7px #504A62;margin-bottom: 7px;z-index: -10;">
                                    <li ><a style="padding-top: 13px;" href="http://tmdsws801/portail/suivi_PND/index_PND.php" target="_blank">Saisir des Plis - PND</a></li>
                                    <li ><a href="http://tmdsws801/portail/suivi_PND/index_Gerer_PND.php" target="_blank" >Gérer les Plis - PND</a></li>
                                    <li ><a href="http://tmdsws801/portail/suivi_PND/synthSaisiePND.php" target="_blank">Synthese PND</a></li>
                                    <li ><a href="http://tmdsws801/portail/suivi_MSP/index_MSP.php" target="_blank">Saisir des Codes Barre</a></li>
                                    <li ><a href="http://tmdsws801/portail/EXAPAQ/index_EXAPAQ.php" target="_blank">EXAPAQ</a></li>
                                    <li ><a href="http://tmdsws801/portail/colisprive/index_colisprive.php" target="_blank">Colis Privé</a></li>
                                    <li ><a href="http://tmdsws801/portail/colissimo/index_colissimo.php" target="_blank">Colissimo</a></li>
                                    <span id="spanmenu-1"><li style="color: white;font-size: 0.6em;margin-left: 9px;font-family: initial;">Saisir des Plis - PND</li>
                                        <li style="color: white;font-size: 0.6em;margin-left: 9px;font-family: initial;">Gérer les Plis - PND zzzz</li>
                                        <li style="color: white;font-size: 0.6em;margin-left: 9px;font-family: initial;">Synthese PND</li>
                                    </span>
                                </ul>
                        </li>
                    </ul>
                </nav>
            {% endif %}


            <p class="ongletMenu">PND</p>
            <nav>
                <ul class="nav menu shadow" style="background-color: #28274D;border-radius: 5px;margin-top: -26px;padding-top: 4px;padding-bottom: 4px;margin-right: 27px;">
                    <li ><a onmouseover="this.style.color = 'palevioletred'" onmouseout="this.style.color = 'white'" href="{{ path('tmd_prod_saisiePnd') }}">Saisie</a></li>
                </ul>
            </nav>


            {% if is_granted('ROLE_ADMIN') %}
                <nav style="margin-right: 14px;margin-top: -22px;">
                    <ul id="menu-3" >
                        <li style="margin-right: 15px;">
                            <h3 class="ongletMenu " style="margin-bottom: 20px;"><a class="arrow-btn" href="#" style="float: none;margin-left: -5px;color: white;font-family: ColaborateReg;font-size: 1.1em;width: 166px;outline-style: none;">Suivi développement </a></h3>
                            <ul class="lz-menu nav menu " id="zindexmenu-1" style="background-color: #28274D;border-radius: 5px;margin-top: -26px;padding-top: 4px;padding-bottom: 12px;margin-left: 4px;box-shadow: 4px 2px 7px #504A62;margin-bottom: 7px;z-index: -10;">
                                <li ><a style="padding-top: 13px;" href="http://tmdsws801/portail/suivi_developpement/index_suivi_developpement.php" target="_blank">Saisie développement</a></li>
                                <li><a href="http://tmdsws801/portail/suivi_developpement/index_afficher_developpement.php" target="_blank" >Afficher développement</a></li>
                                <li ><a href="http://tmdsws801/portail/developpeurs/index_developpeurs.php" target="_blank">Développeurs</a></li>
                                <li ><a href="http://tmdsws801/portail/saisieDEV/suiviDev.php" target="_blank">Suivi des DEVs</a></li>
                                <li ><a href="{{ path('tmd_zpl_homepage') }}">Etik</a></li>
                                <li ><a href="{{ path('tmd_prod_addApplication') }}">Creation App</a></li>
                                <span id="spanmenu-1"><li style="color: white;font-size: 0.6em;margin-left: 9px;font-family: initial;">Saisir des Plis - PND</li>
                                                <li style="color: white;font-size: 0.6em;margin-left: 9px;font-family: initial;">Développeurs</li>
                                             <li style="color: white;font-size: 0.6em;margin-left: 9px;font-family: initial;">Suivi des DEVs</li>
                                        </span>
                            </ul>
                        </li>
                    </ul>
                </nav>
            {% endif %}





            <div id="flecheMenuG" style="position: absolute;right: 0;top: 50%;margin-right: 12px;display: none;cursor: pointer;"><img style="height: 14px;" onclick="hideLeMenu()" src="{{ asset('Images/flecheGauche.png') }}"></div>
        </div>
        {#<div id="flecheMenuG" style="position: absolute;left: 0;top: 50%;margin-left: 20px;display: none;cursor: pointer;"><img onclick="afficheMenu()" src="{{ asset('Images/flecheGauche.png') }}"></div>#}
        <div id="flecheMenuD" onclick="afficheMenu()" style="position: absolute;left: 0;top: 50%;margin-left: 5px;display: none;cursor: pointer;">
            <span style="position: relative;"><img style="height: 14px;margin-left: 12px;"  src="{{ asset('Images/flecheDroite.png') }}"><p style="position: absolute;-moz-transform: rotate(-90deg);transform: rotate(-90deg);-ms-transform: rotate(-90deg);-webkit-transform: rotate(-90deg);margin-left: -12px;top: 50%;margin-top: -7px;">menu</p></span>
        </div>
        <div id="flecheMenuVue" onclick="history.back()" style="position: absolute;left: 0;top: 50%;cursor: pointer;display: none;">
            <span style="position: relative;"><img style="height: 14px;margin-left: 12px;"  src="{{ asset('Images/flecheGauche.png') }}"><p style="position: absolute;-moz-transform: rotate(-90deg);transform: rotate(-90deg);-ms-transform: rotate(-90deg);-webkit-transform: rotate(-90deg);margin-left: -69px;top: 50%;margin-top: -7px;width: 150px;">Retour Suivi Opération</p></span>
        </div>
            <div id="contentMenu" class="col-md-10" style="min-height: 600px;margin-top: 8px;padding-right: 30px;position: relative">
                <img id="imgHeader" src="{{ asset('Images/2019Tessi_FondEcrant.png') }}" style="position: absolute;bottom: 0;width: 474px;opacity: 0.15; z-index:-1;">
                {#<div class="container-fluid">#}
                {% block body %}
                {% endblock %}
                {#</div>#}
            </div>

    </div>
    <div id="modalDelete" class="modal">
        <!-- Modal content -->
        <div class="modal-content">
            <div class="modal-header">
                <h4 id="modalDeleteContenu" class="ModalCarte-title"></h4>
            </div>

            <div class="modal-footer">
                <button id="modalDeleteAnnule" type="button" class="btn btn-default" >Annuler</button>
                <button id="modalDeleteConfirme"type="button" class="btn btn-danger">Confirmer</button>
            </div>
        </div>
    </div>
    <div id="modalDelete2" class="modal">
        <!-- Modal content -->
        <div class="modal-content">
            <div class="modal-header">
                <h4 id="modalDeleteContenu2" class="ModalCarte-title"></h4>
            </div>

            <div class="modal-footer">
                <button id="modalDeleteConfirme2"type="button" class="btn btn-primary">OK</button>
            </div>
        </div>
    </div>


    <footer>
        <p>Tessi MD © {{ 'now'|date('Y') }}</p>
    </footer>
</div>




{% block javascripts %}
    {# Ajoutez ces lignes JavaScript si vous comptez vous servir des fonctionnalités du bootstrap Twitter #}
    <script src="{{ asset('js/calendar/moment.min.js') }}"></script>
    <script src="{{ asset('jquery-1.12.2/jquery1.12.2-min.js') }}"></script>
    <script src="{{ asset('bootstrap-3.3.7/js/bootstrap.min.js') }}"></script>
    <script src="{{ asset('jquery-ui-1.12.1/jquery-ui.min.js') }}"></script>
    <script src="{{ asset('js/BrowserPrint/BrowserPrint-1.0.4.min.js') }}"></script>
    <script src="{{ asset('js/bootstrap-datepicker.js') }}"></script>
    <script src="{{ asset('js/calendar/fullcalendar.js') }}"></script>
    <script src="{{ asset('js/calendar/fr.js') }}"></script>
    <script src="{{ asset('Multi-level-Vertical-Accordion/src/lazeemenu-jquery.js') }}"></script>
    <script src="{{ asset('rangeDatePicker/jquery-date-range-picker-master/src/jquery.daterangepicker.js') }}"></script>
    <script src="{{ asset('js/bootstrap-datepicker.fr.js') }}"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <link rel="stylesheet" href="{{ asset('newstyle.css') }}">
    {#<script src="{{ asset('js/chart.js') }}"></script>#}
    {#<script src="https://printjs-4de6.kxcdn.com/print.min.js"></script>#}

    {% block javascriptsPlus %}
    {% endblock %}


    <script>

        $(document).ready(function() {
            $('#menu-1').lazeemenu('menu-1');
            $('#menu-2').lazeemenu('menu-1');
            $('#menu-3').lazeemenu('menu-1');
            $('#menu-4').lazeemenu('menu-1');

        });

    </script>






    {# ###   lien  BL Attente PROD  ### #}
    <script type="text/javascript">

        $(document).ready(function(){
            var initbl = 0;

            function initialiseInitBL()
            {
                initbl = 0;
            }

            $(".toggleable").hide();
            $(".toggleableFile").hide();
            $(".toggleableRupture").hide();
            $(".toggleableDepotNull").hide();
            function afficherProfile($obj){
                var annonce = $obj.attr('id');
                if (initbl === annonce)
                {
                    $("#afficherProfile".concat(annonce)).hide();
                    initialiseInitBL() ;
                }
                else {
                    $.ajax({
                        url: "{{ path('tmd_prod_donneBlNonProd') }}",
                        type: "POST",
                        data: 'annonce_idd=' + annonce,
                        dataType: "html",
                        contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",
                        complete: function (data) {

                            var json = data.responseText;
                            var obj = JSON.parse(json);
//                            var obj = objet['add'];
//                            var len = obj.length;
                            $("#afficherProfile".concat(annonce)).text(" ");

                            var afficheTout = false;
                            var titre = "Trackings:";
                            var html ="";

                            html+= tabTrackings(obj['add'], obj['add'].length, titre, afficheTout, html);




                            html += '<p style="text-align: left;font-size: 1.6em;margin: 10px;">Synthèse: </p><hr class="menutr">';

                            var art = obj['articles'];
                            var lenA = art.length;
                            html += '<div class="row"><div class="col-md-5" style="overflow: auto;max-height: 200px;"><table class="table table-hover table-bordered table-responsive" style="margin-left: 40px;z-index: 1;font-size: 1.2em;width: 90%;"><tr style="font-weight: bold;font-size: 1.2em;"><td>Code article</td><td>Article</td><td>Quantité</td><td>Statut</td></tr>';
                            for (var j = 0; j < lenA; j++) {


                                html += '<tr class="tabSyntheseBlanc"><td ';
                                if(!art[j]['flagart'] ){
                                    html+='Style="font-size: 1.2em;"';
                                }
                                html +='>' + art[j]['codearticle'] + '</td><td ';
                                if(!art[j]['flagart'] ){
                                    html+='Style="font-size: 1.2em;"';
                                }
                                html +='>' + art[j]['libelle'] + '</td><td ';

                                if(!art[j]['flagart']){
                                    html+='Style="font-size: 1.2em;"';
                                }
                                html+= '>' + art[j]['quantite'] + '</td><td ';
                                if(!art[j]['flagart']){
                                    html+='Style="font-size: 1.2em;"';
                                }

                                if (art[j]['trStatut'] !== "Mise en PROD")
                                {
                                    html+= art[j]['trStatut'] +'</td></tr>';
                                }
                                else {
                                    html += '</td></tr>';
                                }
                            }
                            html += '</table></div>';

                            var perso = obj['perso'];
                            var lenP = perso.length;
                            if ( lenP > 0 && obj['perso'][0]['perso1'].length > 0 ) {
                                html += '<div class="col-md-4" style="overflow: auto;max-height: 200px;"><table class="table table-hover table-bordered table-responsive" style="margin-left: 40px;z-index: 1;font-size: 1.2em;width: 70%;"><tr style="font-weight: bold;font-size: 1.2em;"><td>Perso 1</td><td>Perso 2</td></tr>';

                                for (var k = 0; k < lenP; k++) {

                                    html += '<tr class="tabSyntheseBlanc" ><td style="position: relative;">';
                                    if (perso[k][1] > 1) {
                                        html += '<span class="badge" style="font-size: 0.9em;background-color: #9698C9;padding: 3px;text-align: -moz-right;position: absolute;right: 0;margin-right: 5px;">' + perso[k][1] + '</span>';
                                    }
                                    html += perso[k]['perso1'] + '</td><td>' + perso[k]['perso2'] + '</td></tr>';
                                }
                                html += '</table></div>';
                            }
                            html += '</div>';

                           //  html += '<p style="text-align: left;font-size: 1.6em;margin: 10px;">Ajout date Depot/Production: </p><hr class="menutr">';
                           //
                           //
                           //
                           //
                           //  if (obj['add'][0]['dateDepot']['date'].split(" ")[0] === '-0001-11-30'){
                           //      html+= '<div class="row">'
                           //                  +'<div class="col-md-12">'
                           //                      +'<p style="font-size: 1.6em;width: 150px;text-align: left;margin-left: 10px;">Date de depôt: </p>'
                           //                  +'</div>'
                           //                  +'<div class="col-md-offset-1 col-md-2">'
                           //                      +'<div id="retourdatedepotOk">'
                           //                          +'<div class="input-group date" data-provide="datepicker"  style="width: 150px;">'
                           //                              +'<input id="dateDepotValue" type="text" class="form-control" >'
                           //                                  +'<div class="input-group-addon">'
                           //                                      +'<span class="glyphicon glyphicon-th"></span>'
                           //                                  +'</div>'
                           //                          +'</div>'
                           //                      +'</div>'
                           //                  +'</div>'
                           //                  +'<div class="col-md-2" id="retourdatedepotBouton" style="text-align: left;">'
                           //                              +'<button class="btn btn-default" onclick="valideDateDepot('+annonce+')" >Valide</button>'
                           //                  +'</div>'
                           //                  +'<div class="col-md-12" id="retourdatedepot" style="display: none;text-align: left;margin-left: 10px;">'
                           //                  +'</div>'
                           //              +'</div>';
                           //
                           //  }
                           //  else{
                           //      html+='<div class="row">'
                           //                  +'<div class="col-md-12">'
                           //                      +'<p style="font-size: 1.6em;width: 150px;text-align: left;margin-left: 10px;">Date de depôt: </p>'
                           //                  +'</div>'
                           //                  +'<div class="col-md-12" style="text-align: left;margin-left: 10px;">'
                           //                      +'<p style="font-size: 1.8em;">'+obj['add'][0]['dateDepot']['date'].split(" ")[0]+'</p>'
                           //                  +'</div>'
                           //            +'</div>';
                           //
                           //  }
                           //
                           //  html+= '<div id="dateProductionAValide"';
                           //  if (obj['add'][0]['dateDepot']['date'].split(" ")[0] !== '-0001-11-30'){
                           //
                           //  }
                           //  else{
                           //      html+=' style="display: none;"';
                           //  }
                           // html += '<div class="row">'
                           //                  +'<div class="col-md-12">'
                           //                      +'<p style="font-size: 1.6em;width: 150px;text-align: left;margin-left: 10px;">Date de Production: </p>'
                           //                  +'</div>'
                           //                  +'<div class="col-md-offset-1 col-md-2">'
                           //                          +'<div id="gggf" class="input-group date " data-provide="datepicker" style="width: 150px;">'
                           //                              +'<input id="dateProductionValue" type="text" class="form-control" >'
                           //                                  +'<div class="input-group-addon">'
                           //                                      +'<span class="glyphicon glyphicon-th"></span>'
                           //                                  +'</div>'
                           //                          +'</div>'
                           //                  +'</div>'
                           //                  +'<div class="col-md-2" style="text-align: left;">'
                           //                              +'<button class="btn btn-default" onclick="valideDateProduction('+annonce+')" >Valide</button>'
                           //                  +'</div>'
                           //          +'</div>';

                            var expor = "{{ path('tmd_prod_exportTrackings', {'idFile': 'kannonce' ,'prod': '1' }) }}";
                            expor = expor.replace("kannonce", annonce);
                            html += '<p style="text-align: left;font-size: 1.6em;margin: 10px;">Export: </p><hr class="menutr">';
                            html+= '<p style="text-align: left;margin-left: 13px;"><a href="'+expor+'"  class="btn btn-success btn-xs" role="button">Export</a></p></div>';

                            $(".toggleable").hide();
                            $("#afficherProfile".concat(annonce)).append(html);
                            $("#afficherProfile".concat(annonce)).show();
                            initbl = annonce;
                        }
                    });
                }
            }

            $('.ProfilMini').click( function(event){

                $(".toggleable").hide();
                $(".toggleableFile").hide();
                $(".toggleableRupture").hide();
                $(".toggleableDepotNull").hide();
                afficherProfile($(this));

            });


        });
    </script>

    <script>
        function donneBLCorrespondPerso(bl){
            var elmnt = document.getElementById(bl);

                elmnt.scrollIntoView();
                elmnt.style.backgroundColor = "#DFD8DF";

        }
    </script>



    {#recupre datedepot#}
    <script>
      function valideDateDepot(idFile) {
//          var idFile = idFile;

          var modDatedepotS = $("#dateDepotValue").val();
          var modDatedepot = (moment(modDatedepotS, "DD/MM/YYYY")).format('YYYY-MM-DD');
//           var dateObject = $("#dateDepotValue").datepicker("getDate");
// //          var dateString = moment(dateObject).format('YYYY-MM-DD')
//           var dateString = $.datepicker.formatDate("yy-mm-dd", dateObject);
// //          var dateString = moment(dateObject).format('YYYY-MM-DD');
          $.ajax({
              url: "{{ path('tmd_prod_modifDateDepot') }}",
              type: "POST",
              data: {idFile:  idFile,dateDepot:  modDatedepot },
              dataType: "html",
              contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",
              complete: function (data) {

                  document.location.reload();
                //   var json = data.responseText;
                //   var objet = JSON.parse(json);
                //   var len = objet.length;
                // document.getElementById('retourdatedepotBouton').style.display = 'none';
                // document.getElementById('retourdatedepotOk').style.display = 'none';
                // var htmlr = '<p style="font-size: 1.8em;">'+objet+'</p>';
                // $("#retourdatedepot").append(htmlr);
                // document.getElementById('retourdatedepot').style.display = '';
                // document.getElementById('dateProductionAValide').style.display = '';


              }
          })
      }


    </script>

    {#recupre dateProduction#}
    <script>
        function valideDateProduction(idFile) {
//          var idFile = idFile;
            var dateObject = $("#dateProductionValue").datepicker("getDate");
            var dateString = $.datepicker.formatDate("yy-mm-dd", dateObject);
            $.ajax({
                url: "{{ path('tmd_prod_modifDateProduction') }}",
                type: "POST",
                data: {idFile:  idFile,dateProd:  dateString },
                dataType: "html",
                contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",
                complete: function (data) {

                    document.location.reload(true);


                }
            })
        }


    </script>

    {#   lien des depot null  #}
    <script type="text/javascript">
        $(document).ready(function(){

            var initbl = 0;

            function initialiseInitdepot()
            {
                initbl = 0;
            }

            $(".toggleable").hide();
            $(".toggleableFile").hide();
            $(".toggleableRupture").hide();
            $(".toggleableDepotNull").hide();
            function afficherProfileDepotNull($obj){
                var annonce = $obj.attr('id');
                if (initbl === annonce)
                {
                    $("#afficherProfileDepotNull".concat(annonce)).hide();
                    initialiseInitdepot() ;
                }
                else {
                    $.ajax({
                        url: "{{ path('tmd_prod_donneDepotNull') }}",
                        type: "POST",
                        data: 'annonce_depot=' + annonce,
                        dataType: "html",
                        contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",
                        complete: function (data) {

                            var json = data.responseText;
                            var obj = JSON.parse(json);
//
                            $("#afficherProfileDepotNull".concat(annonce)).text(" ");

                            var afficheTout = false;
                            var titre = "Trackings:";
                            var html ="";

                            html+= tabTrackings(obj['add'], obj['add'].length, titre, afficheTout, html);



                            html += '<p style="text-align: left;font-size: 1.6em;margin: 10px;">Ajout date Depot pour '+ obj['add'].length +' BL </p><hr class="menutr">';





                                html+= '<div class="row" style="margin-bottom: 32px;">'
                                    +'<div class="col-md-12">'
                                    +'<p style="font-size: 1.6em;width: 150px;text-align: left;margin-left: 10px;">Date de depôt: </p>'
                                    +'</div>'
                                    +'<div class="col-md-offset-1 col-md-2">'
                                    +'<div id="retourdatedepotOk">'
                                    +'<div class="input-group date" data-provide="datepicker" data-date-format="dd/mm/yyyy" data-date-language="fr" data-date-autoclose="true"  style="width: 150px;">'
                                        +'<input id="dateDepotValue" type="text" class="form-control" >'
                                    +'<div class="input-group-addon">'
                                    +'<span class="glyphicon glyphicon-th"></span>'
                                    +'</div>'
                                    +'</div>'
                                    +'</div>'
                                    +'</div>'
                                    +'<div class="col-md-2" id="retourdatedepotBouton" style="text-align: left;">'
                                    +'<button class="btn btn-default" onclick="valideDateDepot('+annonce+')" >Valide</button>'
                                    +'</div>'
                                    +'<div class="col-md-12" id="retourdatedepot" style="display: none;text-align: left;margin-left: 10px;">'
                                    +'</div>'
                                    +'</div>';




                            $(".toggleableDepotNull").hide();
                            $("#afficherProfileDepotNull".concat(annonce)).append(html);
                            $("#afficherProfileDepotNull".concat(annonce)).show();
                            initbl = annonce;
                        }
                    });
                }
            }

            $('.ProfilDepotNull').click( function(event){
                $(".toggleable").hide();
                $(".toggleableFile").hide();
                $(".toggleableRupture").hide();
                $(".toggleableDepotNull").hide();
                afficherProfileDepotNull($(this));

            });


        });
    </script>




    {#   lien des bl en rupture  #}
    <script type="text/javascript">
        $(document).ready(function(){
            var init = 0;

            $(".toggleable").hide();
            $(".toggleableFile").hide();
            $(".toggleableRupture").hide();
            $(".toggleableDepotNull").hide();
            function afficherProfileRupture($obj){
                var  annonce  = $obj.attr('id');
                if (init === annonce)
                {
                    $("#afficherProfileRupture".concat(annonce)).hide();
                    init = 0 ;
                }
                else {
                    $.ajax({

                        url: "{{ path('tmd_prod_donneRuptureByFile') }}",
                        type: "POST",
                        data: 'rupture_idbl=' + annonce,
                        dataType: "html",
                        contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",
                        complete: function (data) {
                            var json = data.responseText;
                            var obj = JSON.parse(json);
                            var len = obj['add'].length;

                            var afficheTout = false;

                            if ( len != 0) {
//
                                var titre = "Trackings:";
                                var html ="";

                                html+= tabTrackings(obj['add'], len, titre, afficheTout, html);

                                var expor = "{{ path('tmd_prod_exportTrackings', {'idFile': 'Vannonce' ,'prod': '3' }) }}";
                                expor = expor.replace("Vannonce", annonce);

                                html += '<p style="text-align: left;font-size: 1.6em;margin: 10px;">Synthèse: </p><hr class="menutr">';
                                var art = obj['articles'];
                                var lenA = art.length;
                                html += '<div class="row"><div class="col-md-5" style="overflow: auto;height: 200px;text-align: left;"><table class="table table-hover table-bordered table-responsive" style="margin-left: 40px;z-index: 1;font-size: 1.2em;width: 90%;"><tr style="font-weight: bold;font-size: 1.2em;"><td>Code article</td><td>Article</td><td>Quantité</td><td>Statut</td></tr>';
                                for (var j = 0; j < lenA; j++) {

                                    html += '<tr class="tabSyntheseBlanc"><td ';
                                    if(!art[j]['flagart'] ){
                                        html+='Style="font-size: 1.2em;"';
                                    }
                                    html +='>' + art[j]['codearticle'] + '</td><td ';
                                    if(!art[j]['flagart'] ){
                                        html+='Style="font-size: 1.2em;"';
                                    }
                                    html +='>' + art[j]['libelle'] + '</td><td ';

                                    if(!art[j]['flagart']){
                                        html+='Style="font-size: 1.2em;"';
                                    }
                                    html+= '>' + art[j]['quantite'] + '</td><td ';

                                    if(!art[j]['flagart'] ){
                                        html+='Style="font-size: 1.2em;">';
                                    }

                                    if (art[j]['trStatut'] !== "Mise en PROD")
                                        {
                                            html+= art[j]['trStatut'] +'</td></tr>';
                                    }
                                    else {
                                        html += '</td></tr>';
                                    }
                                    // if (art[j]['idStatut'] === 10){
                                    //     html += 'rupture</td></tr>'
                                    // }
                                    // else {
                                    //     html += '</td></tr>'
                                    // }



                                }
                                html += '</table></div>';

//                                var perso = obj['perso'];
//                                var lenP = perso.length;
//                                if ( lenP > 1 && obj['perso'][0]['perso1'].length > 0) {
//                                    html += '<div class="col-md-4" style="overflow: auto;height: 200px;"><table class="table table-hover table-bordered table-responsive" style="margin-left: 40px;z-index: 1;font-size: 1.2em;width: 70%;"><tr style="font-weight: bold;font-size: 1.2em;"><td>Perso 1</td><td>Perso 2</td></tr>';
//
//                                    for (var k = 0; k < lenP; k++) {
//
//                                        html += '<tr class="tabSyntheseBlanc" ><td style="position: relative;">';
//                                        if (perso[k][1] > 1) {
//                                            html += '<span class="badge" style="font-size: 0.9em;background-color: #9698C9;padding: 3px;text-align: -moz-right;position: absolute;right: 0;margin-right: 5px;">' + perso[k][1] + '</span>';
//                                        }
//                                        html += perso[k]['perso1'] + '</td><td>' + perso[k]['perso2'] + '</td></tr>';
//                                    }
//                                    html += '</table></div>';
//                                }
                                html += '</div>';

                                html += '<p style="text-align: left;font-size: 1.6em;margin: 10px;">Export: </p><hr class="menutr">';

                                html +=  '<p><a href="'+expor+'"  class="btn btn-success btn-xs" role="button">Export</a></p></div>'

                                $(".toggleableRupture").hide();
                                $("#afficherProfileRupture".concat(annonce)).html(html);
                                $("#afficherProfileRupture".concat(annonce)).show();
                                init = annonce;
                            }

                        }
                    });
                }
            }

            $('.ProfilRupture').click( function(event){

                $(".toggleable").hide();
                $(".toggleableFile").hide();
                $(".toggleableRupture").hide();
                $(".toggleableDepotNull").hide();
                afficherProfileRupture($(this));

            });

        });
    </script>


    {# ###   lien  trackings par fichier  ### #}
    <script type="text/javascript">
        $(document).ready(function(){
            var init = 0;


            $(".toggleable").hide();
            $(".toggleableFile").hide();
            $(".toggleableRupture").hide();
            $(".toggleableDepotNull").hide();
            function afficherProfileFile($obj){
                var  annonce  = $obj.attr('id');
                if (init === annonce)
                {
                    $("#afficherProfileFile".concat(annonce)).hide();
                    init = 0 ;
                }
                else {
                    $.ajax({
                        url: "{{ path('tmd_prod_donneTrackingsByFile') }}",
                        type: "POST",
                        data: 'annonce_idbl=' + annonce,
                        dataType: "html",
                        contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",
                        complete: function (data) {

                                var json = data.responseText;
                                var obj = JSON.parse(json);
                                var len = obj['add'].length;

                                var afficheTout = false;

                                if ( len != 0) {
//
                                    var titre = "Trackings:";
                                    var html ="";

                                    html+= tabTrackings(obj['add'], len, titre, afficheTout, html);

                                    var expor = "{{ path('tmd_prod_exportTrackings', {'idFile': 'Vannonce' ,'prod': '1' }) }}";
                                    expor = expor.replace("Vannonce", annonce);

                                    html += '<p style="text-align: left;font-size: 1.6em;margin: 10px;">Synthèse: </p><hr class="menutr">';
                                    var art = obj['articles'];
                                    var lenA = art.length;
                                    html += '<div class="row"><div class="col-md-5" style="overflow: auto;height: 200px;"><table class="table table-hover table-bordered table-responsive" style="margin-left: 40px;z-index: 1;font-size: 1.2em;width: 90%;"><tr style="font-weight: bold;font-size: 1.2em;"><td>Code article</td><td>Article</td><td>Quantité</td><td></td></tr>';
                                    for (var j = 0; j < lenA; j++) {

                                        html += '<tr class="tabSyntheseBlanc"><td ';
                                        if(!art[j]['flagart'] ){
                                            html+='Style="font-size: 1.2em;"';
                                        }
                                        html +='>' + art[j]['codearticle'] + '</td><td ';
                                        if(!art[j]['flagart'] ){
                                            html+='Style="font-size: 1.2em;"';
                                        }
                                        html +='>' + art[j]['libelle'] + '</td><td ';

                                        if(!art[j]['flagart']){
                                            html+='Style="font-size: 1.2em;"';
                                        }
                                        html+= '>' + art[j]['quantite'] + '</td><td ';
                                        if(!art[j]['flagart']){
                                            html+='Style="font-size: 1.2em;"';
                                        }
                                        if(!art[j]['flagart'] ){
                                            html+='Style="font-size: 1.2em;">';
                                        }

                                        if (art[j]['trStatut'] !== "Mise en PROD")
                                        {
                                            html+= art[j]['trStatut'] +'</td></tr>';
                                        }
                                        else {
                                            html += '</td></tr>';
                                        }

                                    }
                                    html += '</table></div>';

                                    var perso = obj['perso'];
                                    var lenP = perso.length;
                                    if ( lenP > 1 && obj['perso'][0]['perso1'].length > 0) {
                                        html += '<div class="col-md-4" style="overflow: auto;height: 200px;"><table class="table table-hover table-bordered table-responsive" style="margin-left: 40px;z-index: 1;font-size: 1.2em;width: 70%;"><tr style="font-weight: bold;font-size: 1.2em;"><td>Perso 1</td><td>Perso 2</td></tr>';

                                        for (var k = 0; k < lenP; k++) {

                                            html += '<tr class="tabSyntheseBlanc" ><td style="position: relative;">';
                                            if (perso[k][1] > 1) {
                                                html += '<span class="badge" style="font-size: 0.9em;background-color: #9698C9;padding: 3px;text-align: -moz-right;position: absolute;right: 0;margin-right: 5px;">' + perso[k][1] + '</span>';
                                            }
                                            html += perso[k]['perso1'] + '</td><td>' + perso[k]['perso2'] + '</td></tr>';
                                        }
                                        html += '</table></div>';
                                    }
                                    html += '</div>';

                                    html += '<p style="text-align: left;font-size: 1.6em;margin: 10px;">Export: </p><hr class="menutr">';

                                    html +=  '<p><a href="'+expor+'"  class="btn btn-success btn-xs" role="button">Export</a></p></div>'

                                    $(".toggleableFile").hide();
                                    $("#afficherProfileFile".concat(annonce)).html(html);
                                    $("#afficherProfileFile".concat(annonce)).show();
                                    init = annonce;
                                }

                        }
                    });
                }
            }

            $('.ProfilFile').click( function(event){

                $(".toggleable").hide();
                $(".toggleableFile").hide();
                $(".toggleableRupture").hide();
                $(".toggleableDepotNull").hide();
                afficherProfileFile($(this));

            });

        });
    </script>

    {#details des articles#}
    <script type="text/javascript">


            function afficherArticle(numBl){


                $.ajax({
                    url: "{{ path('tmd_prod_donneArticleByBl') }}",
                    type: "POST",
                    data: 'numBl=' + numBl,
                    dataType: "html",
                    contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",
                    complete: function (data) {

                        var json = data.responseText;
                        var obj = JSON.parse(json);
                        var len = obj.length;
                        if ( len != 0) {
//                                    $("#afficherProfileFile".concat(annonce)).text(" ");
                            var html = '<p style="font-size: 1.6em;">Articles du n° de BL '+obj[0]['numbl']+': </p>';


                            html += ('<div><table class="table table-hover table-bordered table-responsive" style="z-index: 1;font-size: 1.2em;"><tr style="font-weight: bold;font-size: 1.2em;"><td>Code article</td><td>Libellé article</td><td>Quantité</td></tr>');
                            for (var i = 0; i < len; i++) {
                                if (!obj[i]['flagart'] ) {
                                    html += '<tr><td>' + obj[i]['codearticle'] + '</td><td>' + obj[i]['libelle'] + '</td><td>' + obj[i]['quantite'] + '</td></tr>';
                                }
                            }
                            html += '</table>';



                            $("#modalArticleContenu").html(html);
                        }

                        var modal = document.getElementById('myModal');

                        modal.style.display = "block";




                    }

                });


                }


    </script>

    {#modal article#}
    <script>

        var modal = document.getElementById('myModal');
        var span = document.getElementsByClassName("closeArticle")[0];
        window.onclick = function(event) {
            if (event.target === modal) {
                modal.style.display = "none";
            }
        }
        span.onclick = function() {
            modal.style.display = "none";
        }



    </script>

    {#Paginator#}
    <script type="text/JavaScript">
        function nbPaginator(targ,selObj,restore){
            eval(targ+".location='"+selObj.options[selObj.selectedIndex].value+"'");
            if (restore) selObj.selectedIndex=0;
        }
    </script>

    <script type="text/JavaScript">
        function afficheToutTrackings(){
            $('.toutAffiche').css('display','');
            $('.BoutonAfficheTout').css('display','none');
        }
    </script>

    {# ###   extraction trackings  ### #}
    <script>
//        $(document).ready(function() {
            var nbrSelect = parseInt($('#nbrSelect').html());
            var listFileTracking = [];
            var prod = 0;
            eraseAllSelect();
            document.getElementById("inlineRadio4").checked = true;
            document.getElementById("inlineRadio9").checked = true;
            document.getElementById("date-range0").value = "";



            $('input:radio[name = modeTracking]').change(function(){
                var todays = new Date();

                var today = new Date(todays.getFullYear(), (todays.getMonth()), 1);
                document.getElementById("date-range0").value = "";

                if (this.value === '1') {
                    eraseAllSelect();
                    listFileTracking = [];

                    for (var i = 1; i < nbrSelect+1; i++)
                    {
                        var Sdate = new Date ($('#dateTracking'.concat(i)).html());
                        var date = new Date(Sdate.getFullYear(), (Sdate.getMonth())+1, 1);
                        if (+date === +today)
                        {
                             $('#trackSelect'.concat(i)).prop('checked', true);
                            listFileTracking.push($('#idFileTracking'.concat(i)).html())
                        }

                    }
                    exporter(listFileTracking);

                }
                if (this.value === '2') {
                    eraseAllSelect();
                    listFileTracking = [];
                    for (var i = 1; i < nbrSelect+1; i++)
                    {
                        var Sdate = new Date ($('#dateTracking'.concat(i)).html());
                        var date = new Date(Sdate.getFullYear(), (Sdate.getMonth()), 1);
                        if (+date === +today)
                        {
                              $('#trackSelect'.concat(i)).prop('checked', true);
                            listFileTracking.push($('#idFileTracking'.concat(i)).html())
                        }

                    }
                    exporter(listFileTracking);
                }
                if (this.value === '3')
                {
                    listFileTracking = [];
                    for (var i = 1; i < nbrSelect+1; i++)
                    {
                        $('#trackSelect'.concat(i)).prop('checked', true);
                        listFileTracking.push($('#idFileTracking'.concat(i)).html())
                    }
                   exporter(listFileTracking);
                }


            });

            $('input:radio[name = modeEtat]').change(function() {
                if(document.getElementById("inlineRadio5").checked) prod = '1';
                if(document.getElementById("inlineRadio6").checked) prod = '2';
                if(document.getElementById("inlineRadio7").checked) prod = '3';
                if(document.getElementById("inlineRadio8").checked) prod = '4';
                if(document.getElementById("inlineRadio9").checked) prod = '0';
                exporter(listFileTracking);
            });


            if (!window['console']) {
                window.console = {};
                window.console.log = function () {
                };
            }


            $('#date-range0').dateRangePicker(
                {}).on('datepicker-first-date-selected', function (event, obj) {
                /* This event will be triggered when first date is selected */
                eraseAllSelect();
                document.getElementById("inlineRadio4").checked = true;
                // obj will be something like this:
                // {
                // 		date1: (Date object of the earlier date)
                // }
            })
                .on('datepicker-change', function (event, obj) {
                    /* This event will be triggered when second date is selected */
                    listFileTracking = [];

                    var dateTnf;
                    for (var i = 1; i < nbrSelect+1; i++)
                    {
                        dateTnf = new Date ($('#dateTracking'.concat(i)).html());




                            if ( moment(dateTnf).format('YYYY-MM-DD') >= moment(obj['date1']).format('YYYY-MM-DD') && moment(dateTnf).format('YYYY-MM-DD') <= moment(obj['date2']).format('YYYY-MM-DD'))
                            {
                                $('#trackSelect'.concat(i)).prop('checked', true);
                                listFileTracking.push($('#idFileTracking'.concat(i)).html())
                            }

                    }
                    exporter(listFileTracking);


//
                })
                .on('datepicker-apply', function (event, obj) {
                    /* This event will be triggered when user clicks on the apply button */
                })
                .on('datepicker-close', function () {
                    /* This event will be triggered before date range picker close animation */
                })
                .on('datepicker-closed', function () {
                    /* This event will be triggered after date range picker close animation */
                })
                .on('datepicker-open', function () {
                    /* This event will be triggered before date range picker open animation */
                })
                .on('datepicker-opened', function () {
                    /* This event will be triggered after date range picker open animation */
                    eraseAllSelect();
                });





            function eraseAllSelect(){
                for (var i = 0; i < nbrSelect+1; i++)
                {
                    $('#trackSelect'.concat(i)).attr('checked', false);
                }
            }

            function exporter(data)
            {



                var html = '';
                var url = '{{ path('tmd_prod_exportTrackings', {'idFile': 'data' ,'prod': 'prodt' }) }}';
                url = url.replace("data", data);
                url = url.replace("prodt", prod);

                var urlArticle = '{{ path('tmd_prod_exportTrackingsArticles', {'idFile': 'data' ,'prod': 'prodt' }) }}';
                urlArticle = urlArticle.replace("data", data);
                urlArticle = urlArticle.replace("prodt", prod);



                html += '<a href='+url+'  class="btn btn-success btn-xs" role="button">Export</a>'
                html += '<a style="margin-left: 10px;" href='+urlArticle+'  class="btn btn-success btn-xs" role="button">Export avec articles</a>'
                $("#exportTracking").html(html);
                $("#exportTracking").css('display', '');
            }


            $('input:checkbox[type = "checkbox"]').change(function () {
                if ($(this).is(':checked')) {
                    listFileTracking.push($(this).val());
                    exporter(listFileTracking);
                } else {

                        for (var k =0 ; k < listFileTracking.length ; k++)
                        {
                            if (listFileTracking[k] == $(this).val())
                            {
                               listFileTracking.splice(k,1);
                            }
                        }
                    exporter(listFileTracking);
                }
                if (listFileTracking == 0)
                {
                    $("#exportTracking").css('display', 'none');
                }
            });

//        });
    </script>



    <script type="text/javascript">
        $(document).ready(setup_web_print);
    </script>


    <script>
        $(document).ready(function() {
            if ($('#entered_name').val() != 0)
            {
                sendData();
            }

        })


    </script>



    {#recherche nom,tracking, commandes#}
    <script type="text/javascript">
        function sendDatarechercheCmd(){
            var cmd =  $('#entered_cmd').val();
            var idClient =  $('#idClient').text();
            var idope =  $('#idOperation').text();

            $.ajax({
                url: "{{ path('tmd_prod_rechercheCmd') }}",
                type: "POST",
                data: {cmd:  cmd,idClient:  idClient,idope: idope },
                dataType: "html",
                contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",
                complete: function (data) {

                    var json = data.responseText;
                    var obj = JSON.parse(json);
                    var len = obj['add'].length;

                    if ( len != 0) {


                        var titre = "Resultats: ("+len+") pour la recherche: \""+cmd+'"';
                        var html ="";
                        var afficheTout=false;

                        html += tabTrackings(obj['add'], len, titre, afficheTout, html);



                        var tabdeBL =[];
                        for (var i =0; i < len; i++){
                            tabdeBL.push(obj['add'][i]['numbl'])
                        }



                        var expor = "{{ path('tmd_prod_exportTrackingExcelbyBL', {'idBLs': 'VBL', 'code':'Vcode' }) }}";
                        expor = expor.replace("VBL", tabdeBL);
                        expor = expor.replace("Vcode", cmd);

                        html += '<p style="text-align: left;font-size: 1.6em;margin: 10px;">Synthèse: </p><hr class="menutr">';
                                                            var art = obj['articles'];
                                                            var lenA = art.length;
                                                            html += '<div class="row"><div class="col-md-5" style="overflow: auto;height: 200px;"><table class="table table-hover table-bordered table-responsive" style="margin-left: 40px;z-index: 1;font-size: 1.2em;width: 90%;"><tr style="font-weight: bold;font-size: 1.2em;"><td>Code article</td><td>Libelle</td><td>Quantité</td></tr>';
                                                            for (var j = 0; j < lenA; j++) {

                                                                html += '<tr class="tabSyntheseBlanc"><td ';
                                                                if(!art[j]['flagart'] ){
                                                                    html+='Style="font-size: 1.2em;"';
                                                                }
                                                                html +='>' + art[j]['codearticle'] + '</td><td ';
                                                                if(!art[j]['flagart'] ){
                                                                    html+='Style="font-size: 1.2em;"';
                                                                }
                                                                html +='>' + art[j]['libelle'] + '</td><td ';

                                                                if(!art[j]['flagart']){
                                                                    html+='Style="font-size: 1.2em;"';
                                                                }
                                                                html+= '>' + art[j]['quantite'] + '</td></tr>';
                                                            }
                                                            html += '</table></div>';

                                                            var perso = obj['perso'];
                                                            var lenP = perso.length;
                                                            if ( lenP > 1 && obj['perso'][0]['perso1'].length > 0) {
                                                                html += '<div class="col-md-4" style="overflow: auto;height: 200px;"><table class="table table-hover table-bordered table-responsive" style="margin-left: 40px;z-index: 1;font-size: 1.2em;width: 70%;"><tr style="font-weight: bold;font-size: 1.2em;"><td>Perso 1</td><td>Perso 2</td></tr>';

                                                                for (var k = 0; k < lenP; k++) {

                                                                    html += '<tr class="tabSyntheseBlanc" ><td style="position: relative;">';
                                                                    if (perso[k][1] > 1) {
                                                                        html += '<span class="badge" style="font-size: 0.9em;background-color: #9698C9;padding: 3px;text-align: -moz-right;position: absolute;right: 0;margin-right: 5px;">' + perso[k][1] + '</span>';
                                                                    }
                                                                    html += perso[k]['perso1'] + '</td><td>' + perso[k]['perso2'] + '</td></tr>';
                                                                }
                                                                html += '</table></div>';
                                                            }
                                                            html += '</div>';

                        html += '<p style="text-align: left;font-size: 1.6em;margin: 10px;">Export: </p><hr class="menutr">';

                        html +=  '<p><a href="'+expor+'"  class="btn btn-success btn-xs" role="button">Export</a></p></div>'

                        $("#resultatRecherche").html(html);

                    }
                    else{
                        var htmlr = '<div class="fondBlanc"><p style="text-align: left;font-size: 1.6em;margin: 10px;">Pas de resultat pour la recherche: "'+cmd+'"</p>';
                        $("#resultatRecherche").html(htmlr);
                    }
                    document.getElementById("entered_cmd").value = "";

                }
            });
        }
    </script>


     {# ###   FULLCALENDAR   ### #}
    {#<script>#}



        {#$(document).ready(function () {#}


            {#var max = $('#dateMaxProd').text();#}
            {#if ( max !== '1980-01-01'){#}



                    {#var caseBefore;#}
                    {#var recase = false;#}
                    {#if (max == 0)#}
                    {#{#}
                        {#max =Date.now();#}
                    {#}#}
                    {#tabSynthese(moment(max).format('YYYY-MM'), $('#recupIdAppli').text(),0);#}
                    {#$('#calendar').fullCalendar({#}

                        {#header: {#}
                            {#left: 'prev,next ',#}
                            {#center: 'title',#}
                            {#right: ''#}
                        {#},#}

                        {#defaultDate: max,#}
                        {#lang: 'fr',#}


                        {#buttonIcons: false, // show the prev/next text#}
                        {#editable: true,#}
                        {#eventLimit: true,#}


                        {#// allow "more" link when too many events#}
                        {#dayClick: function () {#}
                        {#},#}
                        {#events:#}
                            {#{#}
                                {#url: '{{ path('tmd_prod_calendar') }}',#}
                                {#data: { idappli: ($('#recupIdAppli').text())},#}



                            {#},#}
                        {#eventRender: function(event, eventElement) {#}
                                {#eventElement.find("div.fc-content").css('text-align', 'center');#}
                                {#eventElement.find("div.fc-row.fc-week.fc-widget-content.fc-rigid").css('height', 'inherit');#}
                                {#eventElement.find("tr:first-child td .fc-day-grid-event").css('margin-top','-4px');#}
                                {#eventElement.find("span.fc-day-number").css('padding', '-4px');#}

                        {#},#}

                        {#eventClick: function(calEvent, jsEvent, view) {#}

                            {#var dateProd = calEvent.infoDate;#}
                            {#var idAppli = calEvent.infoIdAppli;#}
        {#//                    document.getElementById("modifClassCalendar").className = "col-md-4";#}
        {#//                    $('#modifClassCalendar2').css('display', 'inherit');#}
        {#//                    document.getElementById("modifClassCalendar2").css('display', 'block');#}
                            {#if (caseBefore !== undefined) {#}
                                {#caseBefore.css('border-color', '#3A87AD')#}
                                {#$(this).css('border-color', 'red');#}
                                {#if (caseBefore[0] === $(this)[0]) {#}
                                    {#$(this).css('border-color', '#3A87AD');#}
                                    {#recase = true;#}
                                {#}#}
                            {#}#}
                            {#else {#}
                                {#$(this).css('border-color', 'red');#}
                            {#}#}

                            {#if(!recase){#}
                                {#afficherDateFile();#}
                            {#}else{#}
                                {#$("#afficherPardate").html("");#}
                                {#tabSynthese(moment(view.start).add(1,'week').format('YYYY-MM'), $('#recupIdAppli').text(),0);#}
                                {#recase = false;#}
                            {#}#}


                            {#caseBefore = $(this);#}

                                {#var init = 0;#}


                                {#function afficherDateFile(){#}

                                        {#$.ajax({#}
                                            {#url: "{{ path('tmd_prod_donneTrackingsByDateProd') }}",#}
                                            {#type: "POST",#}
                                            {#data: {infoDate:  dateProd,infoAppli:  idAppli},#}

                                            {#dataType: "html",#}
                                            {#contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",#}
                                            {#complete: function (data) {#}

                                                {#var json = data.responseText;#}
                                                {#var obj = JSON.parse(json);#}
                                                {#var len = obj.length;#}

                                                {#if ( len != 0) {#}

                                                    {#var afficheTout = false;#}
                                                    {#var titre = "Trackings:";#}
                                                    {#var html ="";#}

                                                    {#html+= tabTrackings(obj, len, titre, afficheTout, html);#}

                                                    {#html += '<p style="text-align: left;font-size: 1.6em;margin: 10px;">Synthèse: </p></div>';#}

                                                    {#tabSynthese(moment(dateProd).format('YYYY-MM-DD'), $('#recupIdAppli').text(),1);#}

                                                    {#$("#afficherPardate").html(html);#}
                                                {#}#}

                                            {#}#}
                                        {#});#}

                                {#} ;#}

                        {#},#}
                        {#viewRender: function(view,element) {#}
                                   {#var date = moment(view.start).add(1,'M').format('YYYY-MM');#}
                                   {#tabSynthese(moment(view.start).add(1,'week').format('YYYY-MM'), $('#recupIdAppli').text(),0);#}
                                   {#$("#afficherPardate").html("");#}

                       {#}#}
                    {#});#}
            {#}#}
            {#else{#}
                {#$("#rempliCalendar2").html("Pas de production à ce jour !");#}
            {#}#}
        {#});#}
    {#</script>#}

     {#<script>#}
        {#function tabSynthese(date,app,indice ) {#}
            {#$.ajax({#}
                {#url: "{{ path('tmd_prod_donneSyntheseByDateProd') }}",#}
                {#type: "POST",#}
                {#data: {infoDate: date, infoAppli: app},#}

                {#dataType: "html",#}
                {#contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",#}
                {#complete: function (data) {#}

                    {#var json = data.responseText;#}
                    {#var obj = JSON.parse(json);#}
                    {#var obj2 = obj[1];#}
                    {#var obj3 = obj[2];#}
                    {#var len = obj2.length;#}

                    {#var html2 = "";#}
                    {#if ( indice == 0){#}
                        {#html2 += '<p style="text-align: left;font-size: 1.6em;margin: 10px;">Synthèse pour le mois de '+moment(date).format('MMMM')+'</p><hr class="menutr">';#}
{#//                        html2 = '<p>Synthese pour le mois de '+moment(date).format('MMMM')+'</p>';#}
                    {#}#}
                    {#else{#}
                        {#html2 += '<p style="text-align: left;font-size: 1.6em;margin: 10px;">Synthèse pour la date: '+moment(date).format('DD-MM-YYYY')+'</p><hr class="menutr">';#}
                    {#}#}

                    {#html2 += '<div class="row">'#}
                                         {#+'<div class="col-md-8" >'#}
                                                        {#+'<ul class="nav nav-tabs" role="tablist">'#}
                                                            {#+'<li role="presentation" class="active"><a href="#detailsS" aria-controls="home" role="tab" data-toggle="tab">Synthese</a></li>'#}
                                                            {#+'<li role="presentation"><a href="#transportS" aria-controls="profile" role="tab" data-toggle="tab">Transport</a></li>'#}
                                                            {#+'<li role="presentation"><a href="#testS" aria-controls="home" role="tab" data-toggle="tab">SiteProd</a></li>'#}
                                                            {#+'<li role="presentation"><a href="#articleS" aria-controls="home" role="tab" data-toggle="tab">Articles</a></li>'#}
                                                        {#+'</ul>'#}
                                                        {#+'<div class="tab-content">'#}
                                                            {#+'<div role="tabpanel" class="tab-pane active" id="detailsS" style="background-color: white;border: 1px solid #504a62;border-radius: 3px;padding: 5px;">'#}
                                                                {#+'<div class="row">'#}
                                                                    {#+'<div class="col-md-12">'#}
{#//                                                                        +'<div class="row">'#}
{#//                                                                            +'<div class="col-md-9" style="margin-bottom: -8px;"><p >Nombre de fichiers:    </p></div>'#}
{#//                                                                            +'<div class="col-md-3"><p style="font-size: 1.2em;margin-bottom: -8px;">    </p></div>'#}
{#//                                                                        +'</div>'#}
{#//                                                                        +'<div class="row">'#}
{#//                                                                            +'<div class="col-md-9" style="margin-bottom: -8px;"><p >Total des commandes:     </p></div>'#}
{#//                                                                            +'<div class="col-md-3"><p style="font-size: 1.2em;margin-bottom: -8px;"></p></div>'#}
{#//                                                                        +'</div>'#}
                                                                        {#+'<div class="row">'#}
                                                                            {#+'<div class="col-md-9" style="margin-bottom: -8px;"><p >Nombre de BL produits:     </p></div>'#}
                                                                            {#+'<div class="col-md-3"><p style="font-size: 1.2em;margin-bottom: -8px;">'+obj[0]+'</p></div>'#}
                                                                        {#+'</div>'#}
                                                                        {#+'<div class="row">'#}
                                                                            {#+'<div class="col-md-9" style="margin-bottom: -8px;"><p >Nombre de BL en réclamation:     </p></div>'#}
                                                                            {#+'<div class="col-md-3"><p style="font-size: 1.2em;margin-bottom: -8px;"></p></div>'#}
                                                                        {#+'</div>'#}
{#//                                                                    +'</div>'#}
{#//                                                                    +'<div class="col-md-7">'#}
{#//                                                                        +'<div class="row">'#}
{#//                                                                            +'<div class="col-md-7" style="margin-bottom: -8px;"><p >Attente PROD:    </p></div>'#}
{#//                                                                            +'<div class="col-md-5"><p style="font-size: 1.2em;margin-bottom: -8px;width: 40px;></p></div>'#}
{#//                                                                        +'</div>'#}
{#//                                                                        +'<div class="row">'#}
{#//                                                                            +'<div class="col-md-7" style="margin-bottom: -8px;"><p >Date premiere production:    </p></div>'#}
{#//                                                                            +'<div class="col-md-5"><p style="font-size: 1.2em;margin-bottom: -8px;"></p></div>'#}
{#//                                                                        +'</div>'#}
{#//                                                                        +'<span id="dateMaxProd" style="display: none;"></span>'#}
{#//                                                                        +'<div class="row">'#}
{#//                                                                            +'<div class="col-md-7" style="margin-bottom: -8px;"><p >Date dernière production:</p></div>'#}
{#//                                                                            +'<div class="col-md-5"><p style="font-size: 1.2em;margin-bottom: -8px;"></p></div>'#}
{#//                                                                        +'</div>'#}
{#//                                                                    +'</div>'#}
                                                                {#+'</div>'#}
                                                            {#+'</div>'#}
                                                            {#+'</div>'#}
                                                            {#+'<div role="tabpanel" class="tab-pane" id="transportS" style="background-color: white;border: 1px solid #504a62;border-radius: 3px;padding: 5px;">'#}
                                                                {#+'<div class="row" >'#}
                                                                    {#+'<div class="col-md-12" style="padding-right: 27px;">'#}
                                                                        {#+'<div class="row" style="overflow-y: auto;max-height: 98px;overflow-x: hidden;">'#}
                                                                            {#+'<div class="col-md-11">'#}
                                                                                {#+'<div class="row">'#}
                                                                                {#for (var key in obj3) {#}
                                                                                    {#html2 += '<div class="col-md-8" style="margin-bottom: -8px;">'#}
                                                                                        {#+'<p>'+key+'</p>'#}
                                                                                        {#+'</div>'#}
                                                                                        {#+'<div class="col-md-4" style="margin-bottom: -8px;">'#}
                                                                                        {#+'<p style="font-size: 1.2em;">'+obj3[key]+'</p>'#}
                                                                                        {#+'</div>';#}
                                                                                {#}#}
                                                                                {#html2 +='</div>'#}
                                                                            {#+'</div>'#}
                                                                        {#+'</div>'#}
                                                                    {#+'</div>'#}
                                                                {#+'</div>'#}
                                                            {#+'</div>'#}
                                                            {#+'<div role="tabpanel" class="tab-pane" id="testS" style="background-color: white;border: 1px solid #504a62;border-radius: 3px;padding: 5px;">'#}
                                                                {#+'<div class="row">'#}
                                                                {#+'</div>'#}
                                                            {#+'</div>'#}
                                                            {#+'<div role="tabpanel" class="tab-pane" id="articleS" style="background-color: white;border: 1px solid #504a62;border-radius: 3px;padding: 5px;">'#}
                                                                {#+'<div class="row" >'#}
                                                                    {#+'<div class="col-md-12" style="padding-right: 27px;">'#}
{#//                                                                        +'<div class="row" >'#}
{#//                                                                            +'<div class="col-md-12">'#}
{#//                                                                                +'<div class="row">'#}
{#//                                                                                    +'<div class="col-md-5">'#}
{#//                                                                                        +'<p></p>'#}
{#//                                                                                    +'</div>'#}
{#//                                                                                    +'<div class="col-md-3">'#}
{#//                                                                                        +'<p>Quantité totale</p>'#}
{#//                                                                                    +'</div>'#}
{#//                                                                                    +'<div class="col-md-3">'#}
{#//                                                                                        +'<p>Reste à produire</p>'#}
{#//                                                                                    +'</div>'#}
{#//                                                                                +'</div>'#}
{#//                                                                                +'<div class="row" >'#}
{#//                                                                                    +'<div class="col-md-offset-5 col-md-7" >'#}
{#//                                                                                        +'<hr style="margin: -5px -20px;border: 0.2px #504A62 solid;" >'#}
{#//                                                                                    +'</div>'#}
{#//                                                                                +'</div>'#}
{#//                                                                            +'</div>'#}
{#//                                                                        +'</div>'#}
                                                                        {#+'<div class="row" style="overflow-y: auto;max-height: 98px;overflow-x: hidden;">'#}
                                                                            {#+'<div class="col-md-12">'#}
                                                                                {#+'<div class="row">';#}
                                                                                {#var compt = null ;#}
                                                                                {#for (var key in obj2[0]) {#}
                                                                                    {#html2 += '<div class="col-md-8" style="margin-bottom: -8px;">'#}
                                                                                        {#+'<p>'+key+'</p>'#}
                                                                                    {#+'</div>'#}
                                                                                    {#+'<div class="col-md-4" style="margin-bottom: -8px;">'#}
                                                                                        {#+'<p style="font-size: 1.2em;">'+obj2[0][key]+'</p>'#}
                                                                                    {#+'</div>';#}
                                                                                    {#compt = compt + parseInt(obj2[0][key]);#}
                                                                                {#}#}

                                                                                {#if (compt !== null) {#}
                                                                                    {#html2 += '<div class="col-md-8" style="margin-bottom: -8px;">'#}
                                                                                        {#+ '<p style="font-size: 1.2em;">Total : ' + compt + ' articles</p>';#}
                                                                                        {#if (obj2[1] != null && obj2[1].length !== 0) {#}
                                                                                            {#html2 += '<hr style="border: 1px #504A62 solid;">';#}
                                                                                        {#}#}
                                                                                        {#html2 += '</div>'#}
                                                                                        {#+ '</div>';#}
                                                                                {#}else{#}
                                                                                    {#html2 += '<div class="col-md-8" style="margin-bottom: -8px;">'#}
                                                                                        {#+ '<p style="font-size: 1.2em;">Pas d\'articles enregistrés</p>'#}
                                                                                        {#+ '</div>'#}
                                                                                        {#+ '</div>';#}
                                                                                {#}#}

                                                                                {#for (var key in obj2[1]) {#}
                                                                                    {#html2 += '<div class="col-md-8" style="margin-bottom: -8px;">'#}
                                                                                        {#+'<p>'+key+'</p>'#}
                                                                                        {#+'</div>'#}
                                                                                        {#+'<div class="col-md-4" style="margin-bottom: -8px;">'#}
                                                                                        {#+'<p style="font-size: 1.2em;">'+obj2[1][key]+'</p>'#}
                                                                                        {#+'</div>';#}

                                                                                {#}#}

                                                                                {#if (app === '416') {#}
                                                                                    {#var url = '{{ path('tmd_prod_syntheseArtCoke', {'date': 'data' }) }}';#}
                                                                                    {#url = url.replace("data", date);#}
                                                                                    {#html2 += '<a href=' + url + ' style="margin-bottom: 9px;" type="button" class="btn btn-default btn-xs"   >Synthese Nb bouteilles</a>';#}
                                                                                {#}#}
                                                                                {#if (app === '554') {#}
                                                                                    {#var url = '{{ path('tmd_prod_syntheseCoriolis', {'date': 'data' }) }}';#}
                                                                                    {#url = url.replace("data", date);#}
                                                                                    {#html2 += '<a href=' + url + ' style="margin-bottom: 9px;margin-top: 9px;" type="button" class="btn btn-default btn-xs"   >Synthese Multi</a>';#}
                                                                                {#}#}



                                                                        {#html2 +='</div>'#}
                                                                    {#+'</div>'#}
                                                                {#+'</div>'#}
                                                            {#+'</div>'#}
                                                        {#+'</div>'#}
                                                    {#+'</div>'#}
                                                {#+'</div>';#}

                    {#$("#rempliCalendar2").html(html2);#}

                {#}#}
            {#})#}
        {#}#}

    {#</script>#}
    {#<script>#}
    {#function sendDataBL(cmd)#}
        {#{#}
            {#if (cmd !== undefined){#}
                        {#$.ajax({#}
                            {#url: "{{ path('tmd_zpl_imprimEtiq') }}",#}
                            {#type: "POST",#}
                            {#data: {numCmd: cmd, verif: 1},#}
                            {#dataType: "json",#}
                            {#contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",#}
                            {#complete: function (html) {#}
                        {#var temp = '{{ path('tmd_appli_production' ,{ 'bl': 'varBl', 'etat': 'varEtat', 'verif': true, 'vue' : 1,'appAverif': 'false'})|escape('js') }}';#}
                        {#temp = temp.replace('varBl', cmd);#}

                        {#if (html.status !== 400 && html.status !== 401 && html.status !== 405) {#}
                            {#var bl = html.responseText;#}
                            {#var obj = JSON.parse(bl);#}
                            {#var blT = JSON.parse(obj['bl']);#}
                            {#var objb = JSON.parse(bl);#}
                            {#var dateT = JSON.parse(objb['donne']);#}


                            {#var temp = '{{ path('tmd_appli_production' ,{ 'bl': 'varBl', 'etat': 'varEtat', 'verif': true, 'vue' : 1,'appAverif': 'false'})|escape('js') }}';#}
{#//                            temp = temp.replace('varBl', cmd);#}
                            {#if ((blT.date_production).substr(0, 11) === '-0001-11-30') {#}

                                {#if (html.responseJSON['zpl'] !== 'inconnu') {#}
                                    {#temp = temp.replace('varEtat', '0v');#}
                                    {#window.location.href = temp;#}

                                {#}#}
                                {#else {#}
                                    {#temp = temp.replace('varEtat', '2.0');#}
                                    {#window.location.href = temp#}
                                {#}#}
                            {#}#}
                            {#else {#}
                                {#temp = temp.replace('varEtat', '1');#}
                                {#window.location.href = temp#}
                            {#}#}

                        {#}#}
                        {#else if (html.status === 400) {#}
                            {#var temp = '{{ path('tmd_appli_production' ,{ 'bl': 'varBl', 'etat': 'varEtat', 'verif': true})|escape('js') }}';#}
{#//                            temp = temp.replace('varBl', cmd);#}
                            {#temp = temp.replace('varEtat', '4');#}
                            {#window.location.href = temp;#}
                        {#}#}
                        {#else if (html.status === 401) {#}
                            {#var temp = '{{ path('tmd_appli_production' ,{ 'bl': 'varBl', 'etat': 'varEtat', 'verif': true})|escape('js') }}';#}
{#//                            temp = temp.replace('varBl', cmd);#}
                            {#temp = temp.replace('varEtat', '3');#}
                            {#window.location.href = temp;#}
                        {#}#}
                        {#else if (html.status === 405) {#}
                            {#var temp = '{{ path('tmd_appli_production' ,{ 'bl': 'varBl', 'etat': 'varEtat', 'verif': true})|escape('js') }}';#}
{#//                            temp = temp.replace('varBl', cmd);#}
                            {#temp = temp.replace('varEtat', '5');#}
                            {#window.location.href = temp;#}
                        {#}#}

                    {#},#}
                            {#error: function (request, status, error) {#}


                            {#}#}
                        {#})#}

            {#}#}
        {#}#}

        {#</script>#}

    {#tableau affiche trackings#}
    <script>
        function tabTrackings(obj, len, titre, afficheTout, html)
        {
            console.log('object reçu: ',obj);
            console.log('titre', titre);
            console.log('html', html);
            console;log('afficheTout', afficheTout);
            html += '<div class="fondBlanc " style="margin-bottom: 100px;"><p style="text-align: left;font-size: 1.6em;margin: 10px;">'+titre+' </p><hr class="menutr">';

            html += '<div style="overflow: auto;"><table class="table table-hover table-bordered pad" style="margin-left: 40px;z-index: 1;font-size: 1.2em;"><tr style="font-weight: bold;font-size: 1.2em;border-bottom: 2px solid #504A62"><td>Date fichier</td><td>N° BL</td><td>RefClient</td><td>Exp_ref</td><td>num_cmde_client</td>' +
            '<td>date Cmd</td><td>Destinataire</td><td style="padding: 0 50px 0 50px;">rue</td><td>ad2</td><td>ad3</td><td>ad4</td><td>ad5</td><td>ad6</td><td>dest_cp</td><td>dest_ville</td>' +
            '<td>dest_pays</td><td >telephone</td><td>dateDepot</td><td>n° Tracking</td><td>dateProd</td><td>ModExp</td><td>Assurance</td><td>Poids (gr)</td><td>statut</td><td>Qté</td><td>NumTrack</td><td>Date statut</td><td>Statut_livraison</td><td>Nb pages</td><td>Annuler la commande</td></tr>';

            for (var i = 0; i < len; i++) {
                html += '<tr id="'+ obj[i]['numbl'] +'" class="tabSyntheseBlanc toutAffiche"';
                if ( i > 15){
                    html+= 'style = "display: none;"';
                    afficheTout = true;
                }
                html+= '>';
                html += '<td>' + moment(obj[i]['dateFile']['date'].split(" ")[0]).format('DD-MM-YYYY') + '</td>';

                if ( obj[i]['dateProduction'] !== null ) {
                    html += '<td><a style="cursor: pointer;" onclick="sendDataBL(' + obj[i]['numbl'] + ')">' + obj[i]['numbl'] + '</a></td>';
                }
                else {
                    html += '<td>' + obj[i]['numbl'] + '</td>';
                }

                html += '<td>' + obj[i]['refclient'] + '</td>';
                html += '<td>' + obj[i]['expRef'] + '</td>';
                html += '<td>' + obj[i]['numCmdeClient'] + '</td>';
                html += '<td>';
                if(obj[i]['dateCmde']['date'].split(" ")[0] === '-0001-11-30' )
                {
                    html += '-</td>';
                }
                else
                {
                    html += moment(obj[i]['dateCmde']['date'].split(" ")[0]).format('DD-MM-YYYY') +'</td>'
                }
                html += '<td>' + obj[i]['destinataire'] + '</td><td>' + obj[i]['destRue'] + '</td><td>' + obj[i]['destAd2'] +'</td><td>' + obj[i]['destAd3'] +'</td><td>' +obj[i]['destAd4'] +'</td><td>' +obj[i]['destAd5'] +'</td><td>' +obj[i]['destAd6'] +'</td>' +
                    '<td>' + obj[i]['destCp'] + '</td><td>' + obj[i]['destVille'] + '</td><td>' + obj[i]['destPays'] + '</td><td>' + obj[i]['destTel'] + '</td><td>';
                if(obj[i]['dateDepot']['date'].split(" ")[0] === '-0001-11-30' )
                {
                    html += '</td><td>';
                }
                else
                {
                    html += moment(obj[i]['dateDepot']['date'].split(" ")[0]).format('DD-MM-YYYY')+'</td><td>'
                }
                if ( (obj[i]['modexp'] === "DPD" || obj[i]['modexp'] === "DPDPREDI" || obj[i]['modexp'] === "DPDRELAIS") && obj[i]['nColis'] !== '0' )
                {
                    html += '<a href="http://www.dpd.fr/traces_'+obj[i]['nColis']+'" target="_blank" >'+ obj[i]['nColis'] + '</a></td>';
                }
                else if ( (obj[i]['modexp'] === "CPRV" || obj[i]['modexp'] === "CPRVE" || obj[i]['modexp'] === "CPRVTC" || obj[i]['modexp'] === "CPRVT") && obj[i]['nColis'] !== '0')
                {
                    html += '<a href="https://www.colisprive.com/moncolis/pages/detailColis.aspx?numColis='+obj[i]['nColis']+'" target="_blank" >'+ obj[i]['nColis'] + '</a></td>';
                }
                else if ( (obj[i]['modexp'] === "COL" || obj[i]['modexp'] === "COLI" || obj[i]['modexp'] === "COLD" || obj[i]['modexp'] === "COM"  || obj[i]['modexp'] === "LS" || obj[i]['modexp'] === "DOM"  || obj[i]['modexp'] === "DOS"  || obj[i]['modexp'] === "COM")&& obj[i]['nColis'] !== '0')
                {
                    html += '<a href="https://www.laposte.fr/particulier/outils/suivre-vos-envois?code='+obj[i]['nColis']+'" target="_blank" >'+ obj[i]['nColis'] + '</a></td>';
                }
                else if ( obj[i]['modexp'] === undefined)
                {
                    html += '</td>';
                }
                else if ( obj[i]['nColis'] === '0')
                {
                    html += '</td>';
                }
                else if ( obj[i]['modexp'] !== null && obj[i]['modexp'] !== undefined && obj[i]['modexp'].substring(0,6) === "CHRONO" )
                {
                    html += '<a href="https://www.chronopost.fr/fr/chrono_suivi_search?listeNumerosLT='+obj[i]['nColis']+'" target="_blank" >'+ obj[i]['nColis'] + '</a></td>';
                }
                else if ( obj[i]['nColis'] === null )
                {
                    html +=  'NC</td>';
                }
                else
                {
                    html += obj[i]['nColis'] + '</td>';
                }
                if( obj[i]['dateProduction'] !== null) {
                    if (obj[i]['dateProduction'] !== null && obj[i]['dateProduction'] === undefined || obj[i]['dateProduction']['date'].split(" ")[0] === '-0001-11-30') {
                        html += '<td></td>';
                    }

                    else {
                        html += '<td>' + moment(obj[i]['dateProduction']['date'].split(" ")[0]).format('DD-MM-YYYY') + '</td>'
                    }
                }else {
                    html += '<td>NC</td>';
                }

                if(obj[i]['modexp'] === undefined )
                {
                    html+= '<td></td>';
                }
                else if(obj[i]['modexp'] === null )
                {
                    html+= '<td>NC</td>';
                }
                else
                {
                    html += '<td>' + obj[i]['modexp'] + '</td>';
                }

                html+= '<td>' + obj[i]['montant'] + '</td><td>' + (obj[i]['poidsReel']).replace(/^0+/, "") + '</td><td>' + obj[i]['trStatut'] + '</td>';
                if ( obj[i]['quantite'] > 0 ) {
                    html += '<td><a id="'+obj[i]['numbl']+'" onclick="afficherArticle('+obj[i]['numbl']+')" href="#'+obj[i]['numbl']+'">details</a></td>'
                }
                else
                {
                    html += '<td>-</td>'

                }
                if ( ( obj[i]['numTrack']) === "" || obj[i]['numTrack'] == 'undefined'   || obj[i]['numTrack'] == null){
                    html += '<td></td>';
                }
                else{
                    html += '<td>'+obj[i]['numTrack']+'</td>';
                }
                if ( obj[i]['statut']['dateStatut'] === "" || obj[i]['statut']['dateStatut']['date'].split(" ")[0] === '-0001-11-30'){
                    html += '<td></td>';
                }
                else{
                    html += '<td>'+ moment(obj[i]['statut']['dateStatut']['date'].split(" ")[0]).format('DD-MM-YYYY') + '</td>';
                }
                if ( ( obj[i]['statut']['libelle']) === ""){
                    html += '<td></td>';
                }
                else{
                    html += '<td>'+obj[i]['statut']['libelle'] + '</td>';
                }
                html +=  '<td>'+obj[i]['nbpages']+ '</td>';
                if( (obj[i]['trStatut']) == "Rupture stock") {

                    html += '<td><button onclick="AnnulTracking('+obj[i]['numbl']+')" style="background: none; border:none" type="button"><span class="glyphicon glyphicon-remove" style="color: #D34026"></span></button></td>';
                }
                console.log('objet en cours: ', obj[i]);
            }

            html += '</tr></table></div>';

            if (afficheTout) {
                html += '<p class="BoutonAfficheTout" style="font-size: 1.4em;cursor: pointer;" onclick="afficheToutTrackings()" href="#">Tout afficher ..</p>'
            }

            return html;

        }


    </script>
<script>
    function AnnulTracking(numbl) {
        var modal = document.getElementById('modalDelete');
        var modalAnnule = document.getElementById('modalDeleteAnnule');
        var modalConfirme = document.getElementById('modalDeleteConfirme');
//
        $("#modalDeleteContenu").html("Confirmez vous l'annulation de la commande <span style='font-size: 1.2em;'>"+numbl+"</span> ?");

        modal.style.display = "block";
        window.onclick = function (event) {
            if (event.target === modal) {
                modal.style.display = "none";
            }
            if (event.target === modalAnnule) {

                modal.style.display = "none";
            }
            if (event.target === modalConfirme) {

                $.ajax({
                    url: "{{ path('tmd_prod_annuleTracking') }}",
                    type: "POST",
                    data: {numbl:  numbl},
                    dataType: "html",
                    contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",
                    complete: function (data) {
                        modal.style.display = "none";
                        console.log('controller ok')

                        var modal2 = document.getElementById('modalDelete2');
                        var modalConfirme2 = document.getElementById('modalDeleteConfirme2');
                        $("#modalDeleteContenu2").html("La commande n°"+numbl+" a bien été annulée");
                        modal2.style.display = "block";
                        window.onclick = function (event) {
                            if (event.target === modal2) {
                                modal2.style.display = "none";
                                document.location.reload(true);
                            }
                            if (event.target === modalConfirme2) {
                                modal2.style.display = "none";
                                document.location.reload(true);
                            }
                        }

                    }



                })

            }

        }

    }

</script>
    <script>

        {#function afficherArticle(numBl){#}


            {#$.ajax({#}
                {#url: "{{ path('tmd_prod_donneArticleByBl') }}",#}
                {#type: "POST",#}
                {#data: 'numBl=' + numBl,#}
                {#dataType: "html",#}
                {#contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",#}
                {#complete: function (data) {#}

                    {#var json = data.responseText;#}
                    {#var obj = JSON.parse(json);#}
                    {#var len = obj.length;#}
                    {#if ( len != 0) {#}
{#//                                    $("#afficherProfileFile".concat(annonce)).text(" ");#}
                        {#var html = '<p style="font-size: 1.6em;">Articles du n° de BL '+obj[0]['numbl']+': </p>';#}


                        {#html += ('<div><table class="table table-hover table-bordered table-responsive" style="z-index: 1;font-size: 1.2em;"><tr style="font-weight: bold;font-size: 1.2em;"><td>Article</td><td>Quantité</td></tr>');#}
                        {#for (var i = 0; i < len; i++) {#}
                            {#if (!obj[i]['flagart'] ) {#}
                                {#html += '<tr><td>' + obj[i]['libelle'] + '</td><td>' + obj[i]['quantite'] + '</td></tr>';#}
                            {#}#}
                        {#}#}
                        {#html += '</table>';#}



                        {#$("#modalArticleContenu").html(html);#}
                    {#}#}

                    {#var modal = document.getElementById('myModal');#}

                    {#modal.style.display = "block";#}




                {#}#}

            {#});#}


        {#}#}
    </script>


    {#saisi du tracking#}


    <script>
        function menuSG(){
            document.getElementById('menuSGclick').style.display = "";
            document.getElementById('menuSGcache').style.display = "none";
        }

        function menuGestions(){
            document.getElementById('menuGestionsclick').style.display = "";
            document.getElementById('menuGestionscache').style.display = "none";
        }

        function menuSuiviPlis(){
            document.getElementById('menuSuiviPlisclick').style.display = "";
            document.getElementById('menuSuiviPliscache').style.display = "none";
        }
    </script>









{% endblock %}

</body>
</html>